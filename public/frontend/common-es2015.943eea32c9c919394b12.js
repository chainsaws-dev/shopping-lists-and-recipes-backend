(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{EiSp:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t){this.Name=e,this.Amount=t}}},GXvH:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("tk/3"),s=i("qc5x"),r=i("lJxs"),a=i("vkgz"),d=i("AytR"),h=i("XNiG"),c=i("fXoL"),o=i("ceC1"),p=i("ozzT");let g=(()=>{class e{constructor(e,t,i){this.http=e,this.recipes=t,this.shoppinglist=i,this.LoadingData=new h.a,this.RecipesUpdateInsert=new h.a,this.RecivedError=new h.a,this.PaginationSet=new h.a}FetchRecipes(e,t){this.LoadingData.next(!0);const i={headers:new n.d({Page:e.toString(),Limit:t.toString()})};return this.http.get(d.a.GetSetRecipesUrl+"?key="+d.a.ApiKey,i).pipe(Object(r.a)(e=>(e.Recipes=e.Recipes.map(e=>Object.assign(Object.assign({},e),{Ingredients:e.Ingredients?e.Ingredients:[]})),e)),Object(a.a)(e=>{this.recipes.SetRecipes(e.Recipes),this.PaginationSet.next(new s.b(e.Total,e.Limit,e.Offset)),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SearchRecipes(e,t,i){this.LoadingData.next(!0);const h={headers:new n.d({Page:e.toString(),Limit:t.toString(),Search:i})};return this.http.get(d.a.SearchRecipesUrl+"?key="+d.a.ApiKey,h).pipe(Object(r.a)(e=>(e.Recipes=e.Recipes.map(e=>Object.assign(Object.assign({},e),{Ingredients:e.Ingredients?e.Ingredients:[]})),e)),Object(a.a)(e=>{this.recipes.SetRecipes(e.Recipes),this.PaginationSet.next(new s.b(e.Total,e.Limit,e.Offset)),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SaveRecipe(e){this.LoadingData.next(!0),this.http.post(d.a.GetSetRecipesUrl+"?key="+d.a.ApiKey,e).subscribe(e=>{this.RecipesUpdateInsert.next(e),this.RecivedError.next(new s.a(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteRecipe(e){this.LoadingData.next(!0);const t={headers:new n.d({RecipeID:e.ID.toString()})};this.http.delete(d.a.GetSetRecipesUrl+"?key="+d.a.ApiKey,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchShoppingList(e,t){this.LoadingData.next(!0);const i={headers:new n.d({Page:e.toString(),Limit:t.toString()})};return this.http.get(d.a.GetSetShoppingListUrl+"?key="+d.a.ApiKey,i).pipe(Object(a.a)(e=>{this.shoppinglist.SetIngredients(e.Items),this.shoppinglist.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SaveShoppingList(e){this.LoadingData.next(!0),this.http.post(d.a.GetSetShoppingListUrl+"?key="+d.a.ApiKey,e).subscribe(e=>{this.RecipesUpdateInsert.next(e),this.RecivedError.next(new s.a(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteShoppingList(e){this.LoadingData.next(!0);const t={headers:new n.d({IngName:encodeURI(e.Name)})};this.http.delete(d.a.GetSetShoppingListUrl+"?key="+d.a.ApiKey,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteAllShoppingList(){this.http.delete(d.a.GetSetShoppingListUrl+"?key="+d.a.ApiKey).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}}return e.\u0275fac=function(t){return new(t||e)(c.Xb(n.a),c.Xb(o.a),c.Xb(p.a))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ceC1:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("qc5x"),s=i("EiSp"),r=i("XNiG"),a=i("AytR"),d=i("fXoL"),h=i("ozzT");let c=(()=>{class e{constructor(e){this.ShopList=e,this.IngredientSelected=new r.a,this.RecipeChanged=new r.a,this.RecipesUpdated=new r.a,this.RecipesInserted=new r.a,this.RecipesDeleted=new r.a,this.recipes=[]}GetRecipes(){return this.recipes.slice(0,a.a.RecipePageSize)}GetRecipesLen(){return this.recipes.length}GetRecipeById(e){return e<this.recipes.length&&e>0?this.recipes[e]:this.recipes[0]}GetRecipeId(e){return this.recipes.indexOf(e)}SendToShoppingList(e){e.forEach(e=>{this.ShopList.AddNewItem(e)})}GetShoppingList(){return this.ShopList.GetIngredients()}AddNewRecipe(e){const t=new n.c(e.Name,e.Description,e.ImagePath,e.Ingredients,e.ImageDbID,e.ID);this.recipes.length<a.a.RecipePageSize&&this.recipes.push(t),this.RecipeChanged.next(t),this.RecipesInserted.next()}UpdateExistingRecipe(e,t){this.recipes[t]=e,this.RecipeChanged.next(e)}SetRecipes(e){this.recipes=e,this.RecipesUpdated.next()}DeleteRecipe(e){this.recipes.splice(e,1),this.RecipesDeleted.next()}AddNewIngredient(e){const t=this.RecipeToEdit.Ingredients.find(t=>t.Name===e.Name);t?t.Amount=t.Amount+e.Amount:this.RecipeToEdit.Ingredients.push(new s.a(e.Name,e.Amount))}UpdateSelectedIngredient(e){const t=this.RecipeToEdit.Ingredients.find(t=>t.Name===e.Name);if(t&&t!==this.CurrentSelectedItem)t.Name=e.Name,t.Amount=t.Amount+e.Amount,this.DeleteSelectedIngredient();else{const t=this.RecipeToEdit.Ingredients.find(e=>e===this.CurrentSelectedItem);t&&(t.Name=e.Name,t.Amount=e.Amount)}this.CurrentSelectedItem=null,this.IngredientSelected.next(this.CurrentSelectedItem)}DeleteSelectedIngredient(){const e=this.RecipeToEdit.Ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.RecipeToEdit.Ingredients.splice(e,1),this.CurrentSelectedItem=null}ClearAllIngredients(){this.RecipeToEdit.Ingredients=[],this.CurrentSelectedItem=null}GetIngredientsLength(){return this.RecipeToEdit.Ingredients.length}IngredientSelect(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}}return e.\u0275fac=function(t){return new(t||e)(d.Xb(h.a))},e.\u0275prov=d.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ozzT:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("EiSp"),s=i("XNiG"),r=i("AytR"),a=i("fXoL");let d=(()=>{class e{constructor(){this.IngredientSelected=new s.a,this.IngredientChanged=new s.a,this.IngredientsUpdated=new s.a,this.IngredientAdded=new s.a,this.IngredientUpdated=new s.a,this.IngredientDeleted=new s.a,this.IngredientClear=new s.a,this.ingredients=[]}GetIngredients(){return this.ingredients.slice()}GetIngredientsLength(){return this.ingredients.length}SetIngredients(e){this.ingredients=e,this.IngredientsUpdated.next()}SetPagination(e,t,i){this.Total=e}AddNewItem(e){let t=this.ingredients.find(t=>t.Name===e.Name);t?t.Amount=t.Amount+e.Amount:(t=e,this.ingredients.length<r.a.ShoppingListPageSize&&this.ingredients.push(new n.a(e.Name,e.Amount))),this.IngredientAdded.next(t),this.IngredientChanged.next(this.ingredients.slice())}UpdateSelectedItem(e){let t=this.ingredients.find(t=>t.Name===e.Name);if(t&&t!==this.CurrentSelectedItem)t.Name=e.Name,t.Amount=t.Amount+e.Amount,this.DeleteSelectedItem();else{const i=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==i&&(this.ingredients[i]=e,this.IngredientChanged.next(this.ingredients.slice())),t=this.CurrentSelectedItem}this.IngredientUpdated.next(t),this.CurrentSelectedItem=null}DeleteSelectedItem(){const e=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.ingredients.splice(e,1),this.IngredientDeleted.next(this.CurrentSelectedItem),this.IngredientChanged.next(this.ingredients.slice()),this.CurrentSelectedItem=null}ClearAll(){this.ingredients=[],this.CurrentSelectedItem=null,this.IngredientChanged.next(this.ingredients.slice()),this.SetPagination(0,0,0),this.IngredientClear.next()}SelectItemShopList(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qc5x:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a}));class n{constructor(e,t,i,n,s,r){this.Name=e,this.Description=t,this.ImagePath=i,this.Ingredients=n,this.ImageDbID=s,this.ID=r}}class s{constructor(e,t){this.Error=new r(e,t)}}class r{constructor(e,t){this.Code=e,this.Message=t}}class a{constructor(e,t,i){this.Total=e,this.Limit=t,this.Offset=i}}}}]);