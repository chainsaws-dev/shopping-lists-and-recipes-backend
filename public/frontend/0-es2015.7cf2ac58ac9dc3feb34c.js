(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/1gQ":function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"a",function(){return n}),i.d(t,"c",function(){return a});class s{constructor(e,t){this.Name=e,this.Amount=t}}class n{constructor(e,t){this.Error=new r(e,t)}}class r{constructor(e,t){this.Code=e,this.Message=t}}class a{constructor(e,t,i){this.Total=e,this.Limit=t,this.Offset=i}}},GXvH:function(e,t,i){"use strict";i.d(t,"a",function(){return S});var s=i("tk/3"),n=i("/1gQ"),r=i("lJxs"),a=i("vkgz"),h=i("AytR"),o=i("XNiG"),d=i("fXoL"),c=i("ceC1"),l=i("ozzT"),g=i("c7dm"),p=i("Ja2n"),u=i("uCSH");let S=(()=>{class e{constructor(e,t,i,s,n,r){this.http=e,this.recipes=t,this.shoppinglist=i,this.users=s,this.media=n,this.sessions=r,this.LoadingData=new o.a,this.RecipesUpdateInsert=new o.a,this.RecivedError=new o.a,this.PaginationSet=new o.a,this.FileUploadProgress=new o.a,this.FileUploaded=new o.a,this.UserUpdateInsert=new o.a,this.CurrentUserFetch=new o.a,this.TwoFactorSub=new o.a}FetchRecipes(e,t){this.LoadingData.next(!0);const i={headers:new s.e({Page:e.toString(),Limit:t.toString()})};return this.http.get(h.a.GetSetRecipesUrl,i).pipe(Object(r.a)(e=>(e.Recipes=e.Recipes.map(e=>Object.assign(Object.assign({},e),{Ingredients:e.Ingredients?e.Ingredients:[]})),e)),Object(a.a)(e=>{this.recipes.SetRecipes(e.Recipes),this.PaginationSet.next(new n.c(e.Total,e.Limit,e.Offset)),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SearchRecipes(e,t,i){this.LoadingData.next(!0);const o={headers:new s.e({Page:e.toString(),Limit:t.toString(),Search:i})};return this.http.get(h.a.SearchRecipesUrl,o).pipe(Object(r.a)(e=>(e.Recipes=e.Recipes.map(e=>Object.assign(Object.assign({},e),{Ingredients:e.Ingredients?e.Ingredients:[]})),e)),Object(a.a)(e=>{this.recipes.SetRecipes(e.Recipes),this.PaginationSet.next(new n.c(e.Total,e.Limit,e.Offset)),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SaveRecipe(e){this.LoadingData.next(!0),this.http.post(h.a.GetSetRecipesUrl,e).subscribe(e=>{this.RecipesUpdateInsert.next(e),this.RecivedError.next(new n.a(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchFilesList(e,t){this.LoadingData.next(!0);const i={headers:new s.e({Page:e.toString(),Limit:t.toString()})};return this.http.get(h.a.GetSetFileUrl,i).pipe(Object(a.a)(e=>{this.media.SetFiles(e.Files),this.media.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}FileUpload(e){const t=new FormData;t.append("file",e,e.name),this.http.post(h.a.GetSetFileUrl,t,{headers:new s.e({}),reportProgress:!0,observe:"events"}).subscribe(e=>{e.type===s.d.UploadProgress?this.FileUploadProgress.next(String(e.loaded/e.total*100)):e.type===s.d.Response&&e.ok&&this.FileUploaded.next(e.body)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteFile(e,t){this.LoadingData.next(!0);const i={headers:new s.e({FileID:e.toString()})};this.http.delete(h.a.GetSetFileUrl,i).subscribe(e=>{t||this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteRecipe(e){this.LoadingData.next(!0);const t={headers:new s.e({RecipeID:e.ID.toString()})};this.http.delete(h.a.GetSetRecipesUrl,t).subscribe(t=>{this.RecivedError.next(t),this.LoadingData.next(!1),this.DeleteFile(e.ImageDbID,!0)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchShoppingList(e,t){this.LoadingData.next(!0);const i={headers:new s.e({Page:e.toString(),Limit:t.toString()})};return this.http.get(h.a.GetSetShoppingListUrl,i).pipe(Object(a.a)(e=>{this.shoppinglist.SetIngredients(e.Items),this.shoppinglist.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SaveShoppingList(e){this.LoadingData.next(!0),this.http.post(h.a.GetSetShoppingListUrl,e).subscribe(e=>{this.RecipesUpdateInsert.next(e),this.RecivedError.next(new n.a(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteShoppingList(e){this.LoadingData.next(!0);const t={headers:new s.e({IngName:encodeURI(e.Name)})};this.http.delete(h.a.GetSetShoppingListUrl,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteAllShoppingList(){this.http.delete(h.a.GetSetShoppingListUrl).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchSessionsList(e,t){this.LoadingData.next(!0);const i={headers:new s.e({Page:e.toString(),Limit:t.toString()})};return this.http.get(h.a.GetSetSessionsUrl,i).pipe(Object(a.a)(e=>{this.sessions.SetSessions(e.Sessions),this.sessions.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}DeleteSessionByToken(e){this.LoadingData.next(!0);const t={headers:new s.e({Token:e})};this.http.delete(h.a.GetSetSessionsUrl,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteSessionByEmail(e){this.LoadingData.next(!0);const t={headers:new s.e({Email:e})};this.http.delete(h.a.GetSetSessionsUrl,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchUsersList(e,t){this.LoadingData.next(!0);const i={headers:new s.e({Page:e.toString(),Limit:t.toString()})};return this.http.get(h.a.GetSetUsersUrl,i).pipe(Object(a.a)(e=>{this.users.SetUsers(e.Users),this.users.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}FetchCurrentUser(){return this.LoadingData.next(!0),this.http.get(h.a.GetSetCurrentUserUrl).subscribe(e=>{this.CurrentUserFetch.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SaveCurrentUser(e,t,i){this.LoadingData.next(!0),0===e.GUID.length&&(e.GUID="00000000-0000-0000-0000-000000000000"),this.GetObsForSaveCurrentUser(e,t,i).subscribe(e=>{this.UserUpdateInsert.next(e),this.RecivedError.next(new n.a(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SaveUser(e,t,i){this.LoadingData.next(!0),0===e.GUID.length&&(e.GUID="00000000-0000-0000-0000-000000000000"),this.GetObsForSaveUser(e,t,i).subscribe(e=>{this.UserUpdateInsert.next(e),this.RecivedError.next(new n.a(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}LinkTwoFactor(e,t){const i={headers:new s.e({Passcode:e})};this.http.post(h.a.TOTPSettingsUrl,t,i).subscribe(e=>{t.SecondFactor=!0,this.TwoFactorSub.next(t),this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}UnlinkTwoFactor(e){this.http.delete(h.a.TOTPSettingsUrl).subscribe(t=>{e.SecondFactor=!1,this.TwoFactorSub.next(e),this.RecivedError.next(t),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}GetObsForSaveCurrentUser(e,t,i){if(t){const t={headers:new s.e({NewPassword:encodeURI(i)})};return this.http.post(h.a.GetSetCurrentUserUrl,e,t)}return this.http.post(h.a.GetSetCurrentUserUrl,e)}GetObsForSaveUser(e,t,i){if(t){const t={headers:new s.e({NewPassword:encodeURI(i)})};return this.http.post(h.a.GetSetUsersUrl,e,t)}return this.http.post(h.a.GetSetUsersUrl,e)}DeleteUser(e){this.LoadingData.next(!0);const t={headers:new s.e({UserID:encodeURI(e.GUID)})};this.http.delete(h.a.GetSetUsersUrl,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}ConfirmEmail(e){this.LoadingData.next(!0);const t={headers:new s.e({Token:e})};this.http.post(h.a.ConfirmEmailUrl,null,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SendEmailConfirmEmail(e){this.LoadingData.next(!0);const t={headers:new s.e({Email:e})};this.http.post(h.a.ResendEmailUrl,null,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SendEmailResetPassword(e){this.LoadingData.next(!0);const t={headers:new s.e({Email:e})};this.http.post(h.a.SendEmailResetPassUrl,null,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SubmitNewPassword(e,t){this.LoadingData.next(!0);const i={headers:new s.e({Token:e,NewPassword:encodeURI(t)})};this.http.post(h.a.ResetPasswordUrl,null,i).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}}return e.\u0275fac=function(t){return new(t||e)(d.ac(s.b),d.ac(c.a),d.ac(l.a),d.ac(g.a),d.ac(p.a),d.ac(u.a))},e.\u0275prov=d.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Ja2n:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var s=i("vYfO"),n=i("XNiG"),r=i("AytR"),a=i("fXoL");let h=(()=>{class e{constructor(){this.FileSelected=new n.a,this.FilesUpdated=new n.a,this.FilesInserted=new n.a,this.FilesDeleted=new n.a,this.FilesChanged=new n.a,this.Files=[]}GetFiles(){return this.Files.slice()}SetFiles(e){this.Files=e,this.FilesUpdated.next()}SetPagination(e,t,i){this.Total=e}SelectItemFilesList(e){this.CurrentSelectedItem=e,this.FileSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}GetFileById(e){return e<this.Files.length&&e>0?this.Files[e]:this.Files[0]}UpdateExistingFile(e,t){this.Files[t]=e,this.FilesChanged.next(e)}AddNewFile(e){const t=new s.a(e.Filename,e.Filesize,e.Filetype,e.FileID,e.ID);this.Files.length<r.a.AdminUserListPageSize&&this.Files.push(t),this.FilesChanged.next(t),this.FilesInserted.next()}DeleteFile(e){this.Files.splice(e,1),this.FilesDeleted.next()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},c7dm:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var s=i("ggGY"),n=i("XNiG"),r=i("AytR"),a=i("fXoL");let h=(()=>{class e{constructor(){this.UserSelected=new n.a,this.UsersUpdated=new n.a,this.UsersInserted=new n.a,this.UsersDeleted=new n.a,this.UsersChanged=new n.a,this.Users=[]}GetUsers(){return this.Users.slice()}SetUsers(e){this.Users=e,this.UsersUpdated.next()}SetPagination(e,t,i){this.Total=e}SelectItemUsersList(e){this.CurrentSelectedItem=e,this.UserSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}GetUserById(e){return e<this.Users.length&&e>0?this.Users[e]:this.Users[0]}UpdateExistingUser(e,t){this.Users[t]=e,this.UsersChanged.next(e)}AddNewUser(e){const t=new s.a(e.Role,e.Email,e.Phone,e.Name);this.Users.length<r.a.AdminUserListPageSize&&this.Users.push(t),this.UsersChanged.next(t),this.UsersInserted.next()}DeleteUser(e){this.Users.splice(e,1),this.UsersDeleted.next()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ceC1:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var s=i("qc5x"),n=i("/1gQ"),r=i("XNiG"),a=i("AytR"),h=i("fXoL"),o=i("ozzT");let d=(()=>{class e{constructor(e){this.ShopList=e,this.IngredientSelected=new r.a,this.RecipeChanged=new r.a,this.RecipesUpdated=new r.a,this.RecipesInserted=new r.a,this.RecipesDeleted=new r.a,this.recipes=[]}GetRecipes(){return this.recipes.slice(0,a.a.RecipePageSize)}GetRecipesLen(){return this.recipes.length}GetRecipeById(e){return e<this.recipes.length&&e>0?this.recipes[e]:this.recipes[0]}GetRecipeId(e){return this.recipes.indexOf(e)}SendToShoppingList(e){e.forEach(e=>{this.ShopList.AddNewItem(e,!0)})}GetShoppingList(){return this.ShopList.GetIngredients()}AddNewRecipe(e){const t=new s.a(e.Name,e.Description,e.ImagePath,e.Ingredients,e.ImageDbID,e.ID);this.recipes.length<a.a.RecipePageSize&&this.recipes.push(t),this.RecipeChanged.next(t),this.RecipesInserted.next()}UpdateExistingRecipe(e,t){this.recipes[t]=e,this.RecipeChanged.next(e)}SetRecipes(e){this.recipes=e,this.RecipesUpdated.next()}DeleteRecipe(e){this.recipes.splice(e,1),this.RecipesDeleted.next()}AddNewIngredient(e){const t=this.RecipeToEdit.Ingredients.find(t=>t.Name===e.Name);t?t.Amount=t.Amount+e.Amount:this.RecipeToEdit.Ingredients.push(new n.b(e.Name,e.Amount))}UpdateSelectedIngredient(e){const t=this.RecipeToEdit.Ingredients.find(t=>t.Name===e.Name);if(t&&t!==this.CurrentSelectedItem)t.Name=e.Name,t.Amount=t.Amount+e.Amount,this.DeleteSelectedIngredient();else{const t=this.RecipeToEdit.Ingredients.find(e=>e===this.CurrentSelectedItem);t&&(t.Name=e.Name,t.Amount=e.Amount)}this.CurrentSelectedItem=null,this.IngredientSelected.next(this.CurrentSelectedItem)}DeleteSelectedIngredient(){const e=this.RecipeToEdit.Ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.RecipeToEdit.Ingredients.splice(e,1),this.CurrentSelectedItem=null}ClearAllIngredients(){this.RecipeToEdit.Ingredients=[],this.CurrentSelectedItem=null}GetIngredientsLength(){return this.RecipeToEdit.Ingredients.length}IngredientSelect(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(o.a))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ggGY:function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{constructor(e,t,i,s){this.GUID="",this.Role=e,this.Email=t,this.Phone=i,this.Name=s,this.IsAdmin=!1,this.Confirmed=!1,this.SecondFactor=!1,this.Disabled=!1}}},ozzT:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var s=i("/1gQ"),n=i("XNiG"),r=i("AytR"),a=i("fXoL");let h=(()=>{class e{constructor(){this.IngredientSelected=new n.a,this.IngredientChanged=new n.a,this.IngredientsUpdated=new n.a,this.IngredientAdded=new n.a,this.IngredientUpdated=new n.a,this.IngredientDeleted=new n.a,this.IngredientClear=new n.a,this.ingredients=[]}GetIngredients(){return this.ingredients.slice()}GetIngredientsLength(){return this.ingredients.length}SetIngredients(e){this.ingredients=e,this.IngredientsUpdated.next()}SetPagination(e,t,i){this.Total=e}AddNewItem(e,t){let i=this.ingredients.find(t=>t.Name===e.Name);i?i.Amount=i.Amount+e.Amount:(i=e,(this.ingredients.length<r.a.ShoppingListPageSize||t)&&this.ingredients.push(new s.b(e.Name,e.Amount))),this.IngredientAdded.next(i),this.IngredientChanged.next(this.ingredients.slice())}UpdateSelectedItem(e){let t=this.ingredients.find(t=>t.Name===e.Name);if(t&&t!==this.CurrentSelectedItem)t.Name=e.Name,t.Amount=t.Amount+e.Amount,this.DeleteSelectedItem();else{const i=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==i&&(this.ingredients[i]=e,this.IngredientChanged.next(this.ingredients.slice())),t=this.CurrentSelectedItem}this.IngredientUpdated.next(t),this.CurrentSelectedItem=null}DeleteSelectedItem(){const e=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.ingredients.splice(e,1),this.IngredientDeleted.next(this.CurrentSelectedItem),this.IngredientChanged.next(this.ingredients.slice()),this.CurrentSelectedItem=null}ClearAll(){this.ingredients=[],this.CurrentSelectedItem=null,this.IngredientChanged.next(this.ingredients.slice()),this.SetPagination(0,0,0),this.IngredientClear.next()}SelectItemShopList(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qc5x:function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{constructor(e,t,i,s,n,r){this.Name=e,this.Description=t,this.ImagePath=i,this.Ingredients=s,this.ImageDbID=n,this.ID=r}}},uCSH:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var s=i("XNiG"),n=i("fXoL");let r=(()=>{class e{constructor(){this.SessionsUpdated=new s.a,this.SessionsInserted=new s.a,this.SessionsDeleted=new s.a,this.SessionsChanged=new s.a,this.SessionsSelected=new s.a,this.Sessions=[]}GetSessions(){return this.Sessions.slice()}SetSessions(e){this.Sessions=e,this.SessionsUpdated.next()}SetPagination(e,t,i){this.Total=e}SelectItemSessionsList(e){this.CurrentSelectedItem=e,this.SessionsSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}GetSessionById(e){return e<this.Sessions.length&&e>0?this.Sessions[e]:this.Sessions[0]}DeleteSession(e){this.Sessions.splice(e,1),this.SessionsDeleted.next()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},vYfO:function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{constructor(e,t,i,s,n){this.Filename=e,this.Filesize=t,this.Filetype=i,this.FileID=s,this.ID=n}}}}]);