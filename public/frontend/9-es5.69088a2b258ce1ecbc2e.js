!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{jkDv:function(t,i,a){"use strict";a.r(i),a.d(i,"AdminModule",(function(){return xe}));var r,o,s,c,b=a("ofXK"),u=a("3Pt+"),d=a("1kSV"),l=a("tyNb"),g=a("P+IX"),p=a("dxYa"),f=a("AytR"),m=a("lJxs"),v=a("fXoL"),h=a("GXvH"),x=((c=function(){function t(n){e(this,t),this.datastorageservice=n}return n(t,[{key:"resolve",value:function(e,t){var n=e.params.id;return this.datastorageservice.FetchUsersList(e.params.pn,f.a.AdminUserListPageSize).pipe(Object(m.a)((function(e){return e.Users[n]})))}}]),t}()).\u0275fac=function(e){return new(e||c)(v.Xb(h.a))},c.\u0275prov=v.Gb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),P=((s=function(){function t(n){e(this,t),this.datastorageservice=n}return n(t,[{key:"resolve",value:function(e,t){var n=e.params.id;return this.datastorageservice.FetchFilesList(e.params.pn,f.a.MediaListPageSize).pipe(Object(m.a)((function(e){return e.Files[n]})))}}]),t}()).\u0275fac=function(e){return new(e||s)(v.Xb(h.a))},s.\u0275prov=v.Gb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),S=((o=function(){function t(n){e(this,t),this.datastorageservice=n}return n(t,[{key:"resolve",value:function(e,t){var n=e.params.id;return this.datastorageservice.FetchSessionsList(e.params.pn,f.a.SessionsListPageSize).pipe(Object(m.a)((function(e){return e.Sessions[n]})))}}]),t}()).\u0275fac=function(e){return new(e||o)(v.Xb(h.a))},o.\u0275prov=v.Gb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),O=((r=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Eb({type:r,selectors:[["app-admin"]],decls:11,vars:0,consts:[[1,"nav","nav-tabs"],[1,"active"],["routerLink","/admin/users","routerLinkActive","active",1,"nav-link"],["routerLink","/admin/sessions","routerLinkActive","active",1,"nav-link"],["routerLink","/admin/media","routerLinkActive","active",1,"nav-link"]],template:function(e,t){1&e&&(v.Pb(0,"ul",0),v.Pb(1,"li",1),v.Pb(2,"a",2),v.xc(3,"Users"),v.Ob(),v.Ob(),v.Pb(4,"li"),v.Pb(5,"a",3),v.xc(6,"Sessions"),v.Ob(),v.Ob(),v.Pb(7,"li"),v.Pb(8,"a",4),v.xc(9,"Media"),v.Ob(),v.Ob(),v.Ob(),v.Lb(10,"router-outlet"))},directives:[l.f,l.e,l.h],styles:[""]}),r),y=a("ggGY"),k=a("c7dm");function w(e,t){1&e&&(v.Pb(0,"div",4),v.Pb(1,"span",5),v.xc(2,"Loading..."),v.Ob(),v.Ob())}function M(e,t){if(1&e){var n=v.Qb();v.Pb(0,"ngb-alert",6),v.ac("close",(function(){return v.oc(n),v.cc().ShowMessage=!1})),v.xc(1),v.Ob()}if(2&e){var i=v.cc();v.fc("type",i.MessageType),v.xb(1),v.zc(" ",i.ResponseFromBackend.Error.Message,"")}}function C(e,t){1&e&&(v.Pb(0,"h2"),v.xc(1,"Edit"),v.Ob())}function I(e,t){1&e&&(v.Pb(0,"h2"),v.xc(1,"Create"),v.Ob())}function F(e,t){if(1&e){var n=v.Qb();v.Pb(0,"form",7,8),v.ac("ngSubmit",(function(){v.oc(n);var e=v.nc(1);return v.cc().OnSaveClick(e)})),v.Pb(2,"div",9),v.Pb(3,"div",10),v.vc(4,C,2,0,"h2",11),v.vc(5,I,2,0,"h2",11),v.Pb(6,"div",9),v.Pb(7,"label",12),v.xc(8,"Name"),v.Ob(),v.Lb(9,"input",13),v.Ob(),v.Pb(10,"div",9),v.Pb(11,"label",14),v.xc(12,"Email"),v.Ob(),v.Lb(13,"input",15),v.Ob(),v.Pb(14,"div",9),v.Pb(15,"label",16),v.xc(16,"Phone"),v.Ob(),v.Lb(17,"input",17),v.Ob(),v.Pb(18,"div",9),v.Pb(19,"label",18),v.xc(20,"Select role:"),v.Ob(),v.Pb(21,"select",19),v.Pb(22,"option",20),v.xc(23,"Guest"),v.Ob(),v.Pb(24,"option",21),v.xc(25,"Admin"),v.Ob(),v.Ob(),v.Ob(),v.Pb(26,"label",22),v.xc(27,"Password"),v.Ob(),v.Pb(28,"div",23),v.Pb(29,"div",24),v.Pb(30,"div",25),v.Pb(31,"input",26),v.ac("ngModelChange",(function(e){return v.oc(n),v.cc().changepassword=e})),v.Ob(),v.Ob(),v.Ob(),v.Lb(32,"input",27),v.Ob(),v.Pb(33,"button",28),v.xc(34,"Save"),v.Ob(),v.Pb(35,"button",29),v.xc(36,"Cancel"),v.Ob(),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=v.nc(1),a=v.cc();v.xb(4),v.fc("ngIf",a.editmode),v.xb(1),v.fc("ngIf",!a.editmode),v.xb(4),v.fc("ngModel",a.UserToEdit.Name),v.xb(4),v.fc("ngModel",a.UserToEdit.Email),v.xb(4),v.fc("ngModel",a.UserToEdit.Phone),v.xb(4),v.fc("ngModel",a.UserToEdit.Role),v.xb(10),v.fc("ngModel",a.changepassword),v.xb(1),v.fc("disabled",!a.changepassword),v.xb(1),v.fc("disabled",i.invalid)}}var L,E=((L=function(){function t(n,i,a,r){e(this,t),this.AdminServ=n,this.activatedroute=i,this.router=a,this.datastore=r}return n(t,[{key:"ngOnDestroy",value:function(){this.DataLoading.unsubscribe(),this.RecivedErrorSub.unsubscribe(),this.DatabaseUpdated&&this.DatabaseUpdated.unsubscribe()}},{key:"ngOnInit",value:function(){var e=this;this.activatedroute.params.subscribe((function(t){e.editmode=null!=t.id,e.editmode?(e.index=+t.id,e.UserToEdit=e.AdminServ.GetUserById(e.index)):(e.changepassword=!0,e.UserToEdit=new y.a("guest_role_read_only","","","")),e.AdminServ.CurrentSelectedItem=e.UserToEdit})),this.RecivedErrorSub=this.datastore.RecivedError.subscribe((function(t){switch(e.ShowMessage=!0,e.ResponseFromBackend=t,setTimeout((function(){return e.ShowMessage=!1}),5e3),t.Error.Code){case 200:e.MessageType="success";break;default:e.MessageType="danger"}})),this.DataLoading=this.datastore.LoadingData.subscribe((function(t){e.IsLoading=t}))}},{key:"OnSaveClick",value:function(e){var t=this;if(e.valid){if(e.value.changepassword&&0===e.value.newpassword.length)return;this.UserToEdit.Email=e.value.useremail,this.UserToEdit.Name=e.value.username,this.UserToEdit.Phone=e.value.userphone,this.UserToEdit.Role=e.value.roles,this.datastore.SaveUser(this.UserToEdit,e.value.changepassword,e.value.newpassword),this.DatabaseUpdated=this.datastore.UserUpdateInsert.subscribe((function(e){t.editmode?(t.UserToEdit=e,t.AdminServ.UpdateExistingUser(t.UserToEdit,t.index)):(t.UserToEdit=e,t.AdminServ.AddNewUser(t.UserToEdit)),setTimeout((function(){return t.router.navigate(["../"],{relativeTo:t.activatedroute,queryParamsHandling:"merge"})}),1e3)}))}}}]),t}()).\u0275fac=function(e){return new(e||L)(v.Kb(k.a),v.Kb(l.a),v.Kb(l.c),v.Kb(h.a))},L.\u0275cmp=v.Eb({type:L,selectors:[["app-user-edit"]],decls:4,vars:3,consts:[[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[3,"type","close",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"type","close"],[3,"ngSubmit"],["UserEditForm","ngForm"],[1,"form-group"],[2,"margin","3px"],[4,"ngIf"],["for","name"],["type","text","id","name","placeholder","example","name","username","required","",1,"form-control","mb-1",3,"ngModel"],["for","email"],["type","email","id","email","placeholder","exampe@example.com","name","useremail","required","","email","",1,"form-control","mb-1",3,"ngModel"],["for","phone"],["type","tel","id","phone","placeholder","+7 (965) 777-77-77","name","userphone","pattern","^((8|\\+7)[\\- ]?)?(\\(?\\d{3,4}\\)?[\\- ]?)?[\\d\\- ]{5,10}$",1,"form-control","mb-1",3,"ngModel"],["for","roles"],["name","roles","id","roles","required","",1,"form-control",3,"ngModel"],["value","guest_role_read_only"],["value","admin_role_CRUD"],["for","newpassword"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","checkbox","id","changepassword","name","changepassword",3,"ngModel","ngModelChange"],["type","password","id","newpassword","name","newpassword","placeholder","Enter new password","ngModel","",1,"form-control",3,"disabled"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],["type","button","routerLink","..",1,"btn","btn-outline-danger",2,"margin-left","3px"]],template:function(e,t){1&e&&(v.Pb(0,"div",0),v.vc(1,w,3,0,"div",1),v.Ob(),v.vc(2,M,2,2,"ngb-alert",2),v.vc(3,F,37,9,"form",3)),2&e&&(v.xb(1),v.fc("ngIf",t.IsLoading),v.xb(1),v.fc("ngIf",t.ShowMessage),v.xb(1),v.fc("ngIf",t.UserToEdit))},directives:[b.k,d.a,u.r,u.i,u.j,u.b,u.o,u.h,u.k,u.c,u.n,u.p,u.l,u.q,u.a,l.d],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(255,10,29,.25)!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(52,179,13,.25)!important}select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}select.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(255,10,29,.25)!important}select.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}select.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(52,179,13,.25)!important}.image-placeholder[_ngcontent-%COMP%]{background-color:#eee;display:flex;height:333px;margin:5px;border-radius:3px;max-width:592px}.image-placeholder[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{align-self:center;text-align:center;width:100%}"]}),L);function D(e,t){if(1&e){var n=v.Qb();v.Pb(0,"ngb-alert",12),v.ac("close",(function(){return v.oc(n),v.cc(2).ShowMessage=!1})),v.xc(1),v.Ob()}if(2&e){var i=v.cc(2);v.fc("type",i.MessageType),v.xb(1),v.zc(" ",i.ResponseFromBackend.Error.Message,"")}}function z(e,t){if(1&e){var n=v.Qb();v.Pb(0,"li",13),v.ac("click",(function(){v.oc(n);var e=t.$implicit;return v.cc(2).AdminServ.SelectItemUsersList(e)})),v.Pb(1,"div",14),v.Pb(2,"p",15),v.xc(3),v.Ob(),v.Pb(4,"div",16),v.Pb(5,"button",17),v.xc(6,"Edit"),v.Ob(),v.Pb(7,"button",18),v.ac("click",(function(){v.oc(n);var e=t.$implicit,i=t.index;return v.cc(2).OnDeleteUser(e,i)})),v.xc(8,"Delete"),v.Ob(),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=t.$implicit,a=t.index,r=v.cc(2);v.fc("ngClass",r.AdminServ.IsCurrentSelected(i)?"active":""),v.xb(3),v.zc(" ",i.Email,""),v.xb(2),v.fc("routerLink",a)}}function T(e,t){if(1&e){var n=v.Qb();v.Pb(0,"ngb-pagination",19),v.ac("pageChange",(function(e){return v.oc(n),v.cc(2).OnPageChanged(e)})),v.Ob()}if(2&e){var i=v.cc(2);v.fc("collectionSize",i.usCollectionSize)("pageSize",i.usPageSize)("page",i.usCurrentPage)("rotate",!0)("boundaryLinks",!0)("maxSize",11)}}var U=function(e){return["/admin/users",e,"new"]};function R(e,t){if(1&e&&(v.Pb(0,"div",3),v.Pb(1,"div",4),v.Pb(2,"div",5),v.Pb(3,"div",6),v.Pb(4,"button",7),v.xc(5,"Add"),v.Ob(),v.Ob(),v.Ob(),v.vc(6,D,2,2,"ngb-alert",8),v.Pb(7,"ul",9),v.vc(8,z,9,3,"li",10),v.Ob(),v.vc(9,T,1,6,"ngb-pagination",11),v.Ob(),v.Ob()),2&e){var n=v.cc();v.xb(4),v.fc("routerLink",v.jc(4,U,n.usCurrentPage)),v.xb(2),v.fc("ngIf",n.ShowMessage),v.xb(2),v.fc("ngForOf",n.Users),v.xb(1),v.fc("ngIf",n.usCollectionSize>n.usPageSize)}}function A(e,t){1&e&&(v.Pb(0,"div",20),v.Pb(1,"span",21),v.xc(2,"Loading..."),v.Ob(),v.Ob())}var _,j=((_=function(){function t(n,i,a,r){e(this,t),this.ActiveRoute=n,this.DataServ=i,this.AdminServ=a,this.router=r}return n(t,[{key:"ngOnDestroy",value:function(){this.RecivedErrorSub.unsubscribe(),this.PageChanged.unsubscribe(),this.DataLoading.unsubscribe(),this.FetchOnInint.unsubscribe()}},{key:"ngOnInit",value:function(){var e=this;this.usPageSize=f.a.AdminUserListPageSize,this.RecivedErrorSub=this.DataServ.RecivedError.subscribe((function(t){switch(e.ShowMessage=!0,e.ResponseFromBackend=t,setTimeout((function(){return e.ShowMessage=!1}),5e3),t.Error.Code){case 200:e.MessageType="success";break;default:e.MessageType="danger"}})),this.PageChanged=this.ActiveRoute.params.subscribe((function(t){e.usCurrentPage=+t.pn,e.FetchOnInint=e.DataServ.FetchUsersList(e.usCurrentPage,f.a.AdminUserListPageSize).subscribe((function(t){e.Users=e.AdminServ.GetUsers(),e.usCollectionSize=e.AdminServ.Total}),(function(t){e.Users=[]}))})),this.DataLoading=this.DataServ.LoadingData.subscribe((function(t){e.IsLoading=t}))}},{key:"OnPageChanged",value:function(e){this.usCurrentPage=e,this.router.navigate(["../",e.toString()],{relativeTo:this.ActiveRoute})}},{key:"OnDeleteUser",value:function(e,t){this.AdminServ.DeleteUser(t),this.DataServ.DeleteUser(e),this.Users=this.AdminServ.GetUsers()}}]),t}()).\u0275fac=function(e){return new(e||_)(v.Kb(l.a),v.Kb(h.a),v.Kb(k.a),v.Kb(l.c))},_.\u0275cmp=v.Eb({type:_,selectors:[["app-user-list"]],decls:3,vars:2,consts:[["class","row",4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"row"],[1,"col"],[1,"input-group","mb-1"],[1,"input-group-prepend","mt-1"],["queryParamsHandling","merge",1,"btn","btn-outline-primary",3,"routerLink"],[3,"type","close",4,"ngIf"],[1,"list-group","mb-1"],["style","cursor: pointer;","class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange",4,"ngIf"],[3,"type","close"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center",2,"cursor","pointer",3,"ngClass","click"],[1,"input-group"],[1,"p-2","m-0","flex-grow-1",2,"place-items","center"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-success",3,"routerLink"],["type","button",1,"btn","btn-outline-danger",3,"click"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){1&e&&(v.vc(0,R,10,6,"div",0),v.Pb(1,"div",1),v.vc(2,A,3,0,"div",2),v.Ob()),2&e&&(v.fc("ngIf",!t.IsLoading),v.xb(2),v.fc("ngIf",t.IsLoading))},directives:[b.k,l.d,b.j,d.a,b.i,d.i],styles:[""]}),_),K=a("Ja2n");function B(e,t){if(1&e){var n=v.Qb();v.Pb(0,"ngb-alert",11),v.ac("close",(function(){return v.oc(n),v.cc(2).ShowMessage=!1})),v.xc(1),v.Ob()}if(2&e){var i=v.cc(2);v.fc("type",i.MessageType),v.xb(1),v.zc(" ",i.ResponseFromBackend.Error.Message,"")}}function G(e,t){if(1&e){var n=v.Qb();v.Pb(0,"div",12),v.Pb(1,"a",13),v.Lb(2,"img",14),v.Ob(),v.Pb(3,"div",15),v.Pb(4,"button",16),v.xc(5,"Edit"),v.Ob(),v.Pb(6,"button",17),v.ac("click",(function(){v.oc(n);var e=t.$implicit,i=t.index;return v.cc(2).OnDeleteFile(e,i)})),v.xc(7,"Delete"),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=t.$implicit,a=t.index;v.xb(1),v.fc("href",i.FileID,v.pc),v.xb(1),v.fc("src",i.FileID,v.pc)("alt",i.Filename),v.xb(2),v.fc("routerLink",a)}}function Q(e,t){if(1&e){var n=v.Qb();v.Pb(0,"ngb-pagination",18),v.ac("pageChange",(function(e){return v.oc(n),v.cc(2).OnPageChanged(e)})),v.Ob()}if(2&e){var i=v.cc(2);v.fc("collectionSize",i.meCollectionSize)("pageSize",i.mePageSize)("page",i.meCurrentPage)("rotate",!0)("boundaryLinks",!0)("maxSize",11)}}var q=function(e){return["/admin/media",e,"new"]};function $(e,t){if(1&e&&(v.Pb(0,"div"),v.vc(1,B,2,2,"ngb-alert",3),v.Pb(2,"div",4),v.Pb(3,"div",5),v.Pb(4,"button",6),v.xc(5,"Add"),v.Ob(),v.Ob(),v.Ob(),v.Pb(6,"div",7),v.vc(7,G,8,4,"div",8),v.Ob(),v.Pb(8,"div",9),v.vc(9,Q,1,6,"ngb-pagination",10),v.Ob(),v.Ob()),2&e){var n=v.cc();v.xb(1),v.fc("ngIf",n.ShowMessage),v.xb(3),v.fc("routerLink",v.jc(4,q,n.meCurrentPage)),v.xb(3),v.fc("ngForOf",n.Files),v.xb(2),v.fc("ngIf",n.meCollectionSize>n.mePageSize)}}function H(e,t){1&e&&(v.Pb(0,"div",19),v.Pb(1,"span",20),v.xc(2,"Loading..."),v.Ob(),v.Ob())}var X,N=((X=function(){function t(n,i,a,r){e(this,t),this.ActiveRoute=n,this.DataServ=i,this.MediaServ=a,this.router=r}return n(t,[{key:"ngOnDestroy",value:function(){this.RecivedErrorSub.unsubscribe(),this.PageChanged.unsubscribe(),this.DataLoading.unsubscribe(),this.FetchOnInint.unsubscribe()}},{key:"ngOnInit",value:function(){var e=this;this.mePageSize=f.a.MediaListPageSize,this.RecivedErrorSub=this.DataServ.RecivedError.subscribe((function(t){switch(e.ShowMessage=!0,e.ResponseFromBackend=t,setTimeout((function(){return e.ShowMessage=!1}),5e3),t.Error.Code){case 200:e.MessageType="success";break;default:e.MessageType="danger"}})),this.PageChanged=this.ActiveRoute.params.subscribe((function(t){e.meCurrentPage=+t.pn,e.FetchOnInint=e.DataServ.FetchFilesList(e.meCurrentPage,f.a.MediaListPageSize).subscribe((function(t){e.Files=e.MediaServ.GetFiles(),e.meCollectionSize=e.MediaServ.Total}),(function(t){e.Files=[]}))})),this.DataLoading=this.DataServ.LoadingData.subscribe((function(t){e.IsLoading=t}))}},{key:"OnPageChanged",value:function(e){this.meCurrentPage=e,this.router.navigate(["../",e.toString()],{relativeTo:this.ActiveRoute})}},{key:"OnDeleteFile",value:function(e,t){this.MediaServ.DeleteFile(t),this.DataServ.DeleteFile(e.ID,!1),this.Files=this.MediaServ.GetFiles()}}]),t}()).\u0275fac=function(e){return new(e||X)(v.Kb(l.a),v.Kb(h.a),v.Kb(K.a),v.Kb(l.c))},X.\u0275cmp=v.Eb({type:X,selectors:[["app-media-list"]],decls:3,vars:2,consts:[[4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[3,"type","close",4,"ngIf"],[1,"input-group","ml-3"],[1,"input-group-prepend","mt-2"],["queryParamsHandling","merge",1,"btn","btn-outline-primary",3,"routerLink"],[1,"parent-media-box"],["class","media-box",4,"ngFor","ngForOf"],[1,"ml-3"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange",4,"ngIf"],[3,"type","close"],[1,"media-box"],[3,"href"],[3,"src","alt"],[1,"media-box-overlay"],["type","button",1,"btn","btn-outline-success",3,"routerLink"],["type","button",1,"btn","btn-outline-danger",3,"click"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){1&e&&(v.vc(0,$,10,6,"div",0),v.Pb(1,"div",1),v.vc(2,H,3,0,"div",2),v.Ob()),2&e&&(v.fc("ngIf",!t.IsLoading),v.xb(2),v.fc("ngIf",t.IsLoading))},directives:[b.k,l.d,b.j,d.a,d.i],styles:[".parent-media-box[_ngcontent-%COMP%]{display:grid;grid-gap:1rem;grid-template-columns:repeat(auto-fit,minmax(360px,1fr));grid-auto-rows:minmax(200px,auto);padding:.3rem 1rem}.media-box[_ngcontent-%COMP%]{font-size:2rem;padding:.3rem;border-radius:5px;display:inline-block;position:relative;border:1px solid rgba(0,0,0,.125);color:#495057;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.media-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;border-radius:5px;display:block}.media-box-overlay[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:.5rem}"]}),X),J=a("vYfO");function Y(e,t){1&e&&(v.Pb(0,"div",4),v.Pb(1,"span",5),v.xc(2,"Loading..."),v.Ob(),v.Ob())}function V(e,t){if(1&e){var n=v.Qb();v.Pb(0,"ngb-alert",6),v.ac("close",(function(){return v.oc(n),v.cc().ShowMessage=!1})),v.xc(1),v.Ob()}if(2&e){var i=v.cc();v.fc("type",i.MessageType),v.xb(1),v.zc(" ",i.ResponseFromBackend.Error.Message,"")}}function W(e,t){1&e&&(v.Pb(0,"h2"),v.xc(1,"Edit"),v.Ob())}function Z(e,t){1&e&&(v.Pb(0,"h2"),v.xc(1,"Create"),v.Ob())}function ee(e,t){1&e&&(v.Pb(0,"div",24),v.Pb(1,"h4"),v.xc(2,"592x333"),v.Ob(),v.Ob())}function te(e,t){if(1&e&&v.Lb(0,"img",25),2&e){var n=v.cc(2);v.fc("src",n.FileToEdit.FileID,v.pc)("alt",n.FileToEdit.Filename)}}function ne(e,t){if(1&e){var n=v.Qb();v.Pb(0,"form",null,7),v.Pb(2,"div",8),v.Pb(3,"div",9),v.vc(4,W,2,0,"h2",3),v.vc(5,Z,2,0,"h2",3),v.vc(6,ee,3,0,"div",10),v.Pb(7,"a",11),v.vc(8,te,1,2,"img",12),v.Ob(),v.Pb(9,"button",13),v.ac("click",(function(){return v.oc(n),v.nc(13).click()})),v.Pb(10,"span"),v.xc(11,"Upload image"),v.Ob(),v.Pb(12,"input",14,15),v.ac("change",(function(e){return v.oc(n),v.cc().onFileInput(e)})),v.Ob(),v.Ob(),v.Pb(14,"div",16),v.Lb(15,"div",17),v.Ob(),v.Pb(16,"div",8),v.Pb(17,"label",18),v.xc(18,"File name"),v.Ob(),v.Lb(19,"input",19),v.Ob(),v.Pb(20,"div",8),v.Pb(21,"label",18),v.xc(22,"File size"),v.Ob(),v.Lb(23,"input",20),v.Ob(),v.Pb(24,"div",8),v.Pb(25,"label",18),v.xc(26,"File type"),v.Ob(),v.Lb(27,"input",21),v.Ob(),v.Pb(28,"div",8),v.Pb(29,"label",18),v.xc(30,"File link"),v.Ob(),v.Lb(31,"input",22),v.Ob(),v.Pb(32,"button",23),v.xc(33,"Cancel"),v.Ob(),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=v.cc();v.xb(4),v.fc("ngIf",i.editmode),v.xb(1),v.fc("ngIf",!i.editmode),v.xb(1),v.fc("ngIf",!i.FileToEdit.FileID),v.xb(1),v.fc("href",i.FileToEdit.FileID,v.pc),v.xb(1),v.fc("ngIf",i.FileToEdit.FileID),v.xb(1),v.fc("disabled",i.editmode),v.xb(6),v.tc(i.CurPercentStyle),v.xb(4),v.fc("ngModel",i.FileToEdit.Filename)("disabled",!0),v.xb(4),v.fc("ngModel",i.FileToEdit.Filesize)("disabled",!0),v.xb(4),v.fc("ngModel",i.FileToEdit.Filetype)("disabled",!0),v.xb(4),v.fc("ngModel",i.FileToEdit.FileID)("disabled",!0)}}var ie,ae=((ie=function(){function t(n,i,a,r){e(this,t),this.MediaServ=n,this.activatedroute=i,this.router=a,this.datastore=r,this.CurPercentStyle="width: 0%"}return n(t,[{key:"ngOnDestroy",value:function(){this.DataLoading.unsubscribe(),this.RecivedErrorSub.unsubscribe(),this.FileProgress.unsubscribe(),this.FileUploaded.unsubscribe(),this.DatabaseUpdated&&this.DatabaseUpdated.unsubscribe()}},{key:"ngOnInit",value:function(){var e=this;this.activatedroute.params.subscribe((function(t){e.editmode=null!=t.id,e.editmode?(e.index=+t.id,e.FileToEdit=e.MediaServ.GetFileById(e.index)):e.FileToEdit=new J.a("",0,"","",0),e.MediaServ.CurrentSelectedItem=e.FileToEdit})),this.RecivedErrorSub=this.datastore.RecivedError.subscribe((function(t){switch(e.ShowMessage=!0,e.ResponseFromBackend=t,setTimeout((function(){return e.ShowMessage=!1}),5e3),t.Error.Code){case 200:e.MessageType="success";break;default:e.MessageType="danger"}})),this.DataLoading=this.datastore.LoadingData.subscribe((function(t){e.IsLoading=t})),this.FileProgress=this.datastore.FileUploadProgress.subscribe((function(t){e.CurPercentStyle="width: "+t+"%"})),this.FileUploaded=this.datastore.FileUploaded.subscribe((function(t){e.FileToEdit=t,e.editmode=!0}))}},{key:"onFileInput",value:function(e){this.CurPercentStyle="width: 0%",this.datastore.FileUpload(e.target.files[0])}}]),t}()).\u0275fac=function(e){return new(e||ie)(v.Kb(K.a),v.Kb(l.a),v.Kb(l.c),v.Kb(h.a))},ie.\u0275cmp=v.Eb({type:ie,selectors:[["app-media-edit"]],decls:4,vars:3,consts:[[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[3,"type","close",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"type","close"],["FileEditForm","ngForm"],[1,"form-group"],[2,"margin","3px"],["class","image-placeholder mx-auto",4,"ngIf"],[3,"href"],["class","rounded d-block mx-auto","style","margin: 3px; max-width: 500px; max-height: 333px; max-width: 100%;",3,"src","alt",4,"ngIf"],["type","button",1,"btn","btn-outline-primary",2,"margin","3px",3,"disabled","click"],["type","file","accept","image/*",1,"form-control-file",2,"display","none",3,"change"],["fileInput",""],[1,"progress","mb-1"],["role","progressbar",1,"progress-bar","progress-bar-striped","progress-bar-animated"],["for","name"],["type","text","id","fname","placeholder","placeholder.jpg","name","filename","required","",1,"form-control","mb-1",3,"ngModel","disabled"],["type","text","id","fsize","placeholder","0","name","filesize","required","",1,"form-control","mb-1",3,"ngModel","disabled"],["type","text","id","ftype","placeholder","jpg","name","filetype","required","",1,"form-control","mb-1",3,"ngModel","disabled"],["type","text","id","flink","placeholder","/uploads/placeholder.jpg","name","filelink","required","",1,"form-control","mb-1",3,"ngModel","disabled"],["type","button","routerLink","..",1,"btn","btn-outline-danger",2,"margin-left","3px"],[1,"image-placeholder","mx-auto"],[1,"rounded","d-block","mx-auto",2,"margin","3px","max-width","500px","max-height","333px","max-width","100%",3,"src","alt"]],template:function(e,t){1&e&&(v.Pb(0,"div",0),v.vc(1,Y,3,0,"div",1),v.Ob(),v.vc(2,V,2,2,"ngb-alert",2),v.vc(3,ne,34,16,"form",3)),2&e&&(v.xb(1),v.fc("ngIf",t.IsLoading),v.xb(1),v.fc("ngIf",t.ShowMessage),v.xb(1),v.fc("ngIf",t.FileToEdit))},directives:[b.k,d.a,u.r,u.i,u.j,u.b,u.o,u.h,u.k,l.d],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(255,10,29,.25)!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(52,179,13,.25)!important}.image-placeholder[_ngcontent-%COMP%]{background-color:#eee;display:flex;height:333px;margin:5px;border-radius:3px;max-width:592px}.image-placeholder[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{align-self:center;text-align:center;width:100%}"]}),ie),re=a("uCSH");function oe(e,t){if(1&e){var n=v.Qb();v.Pb(0,"ngb-alert",15),v.ac("close",(function(){return v.oc(n),v.cc(2).ShowMessage=!1})),v.xc(1),v.Ob()}if(2&e){var i=v.cc(2);v.fc("type",i.MessageType),v.xb(1),v.zc(" ",i.ResponseFromBackend.Error.Message,"")}}function se(e,t){if(1&e){var n=v.Qb();v.Pb(0,"li",16),v.ac("click",(function(){v.oc(n);var e=t.$implicit;return v.cc(2).SessServ.SelectItemSessionsList(e)})),v.Pb(1,"div",17),v.Pb(2,"p",18),v.xc(3),v.Ob(),v.Pb(4,"div",19),v.Pb(5,"button",20),v.xc(6,"Edit"),v.Ob(),v.Pb(7,"button",21),v.ac("click",(function(){v.oc(n);var e=t.$implicit,i=t.index;return v.cc(2).OnDeleteSession(e,i)})),v.xc(8,"Delete"),v.Ob(),v.Ob(),v.Ob(),v.Ob()}if(2&e){var i=t.$implicit,a=t.index,r=v.cc(2);v.fc("ngClass",r.SessServ.IsCurrentSelected(i)?"active":""),v.xb(3),v.zc(" ",i.Email+" "+i.IP,""),v.xb(2),v.fc("routerLink",a)}}function ce(e,t){if(1&e){var n=v.Qb();v.Pb(0,"ngb-pagination",22),v.ac("pageChange",(function(e){return v.oc(n),v.cc(2).OnPageChanged(e)})),v.Ob()}if(2&e){var i=v.cc(2);v.fc("collectionSize",i.sesCollectionSize)("pageSize",i.sesPageSize)("page",i.sesCurrentPage)("rotate",!0)("boundaryLinks",!0)("maxSize",11)}}function be(e,t){if(1&e){var n=v.Qb();v.Pb(0,"div",3),v.Pb(1,"div",4),v.vc(2,oe,2,2,"ngb-alert",5),v.Pb(3,"form",6,7),v.ac("ngSubmit",(function(){v.oc(n);var e=v.nc(4);return v.cc().OnDeleteSessionByEmail(e)})),v.Pb(5,"div",8),v.Pb(6,"label",9),v.xc(7,"Email"),v.Ob(),v.Lb(8,"input",10),v.Pb(9,"button",11),v.xc(10,"Delete"),v.Ob(),v.Ob(),v.Ob(),v.Pb(11,"ul",12),v.vc(12,se,9,3,"li",13),v.Ob(),v.vc(13,ce,1,6,"ngb-pagination",14),v.Ob(),v.Ob()}if(2&e){var i=v.cc();v.xb(2),v.fc("ngIf",i.ShowMessage),v.xb(10),v.fc("ngForOf",i.Sessions),v.xb(1),v.fc("ngIf",i.sesCollectionSize>i.sesPageSize)}}function ue(e,t){1&e&&(v.Pb(0,"div",23),v.Pb(1,"span",24),v.xc(2,"Loading..."),v.Ob(),v.Ob())}var de,le,ge,pe,fe=((le=function(){function t(n,i,a,r){e(this,t),this.ActiveRoute=n,this.DataServ=i,this.SessServ=a,this.router=r}return n(t,[{key:"ngOnDestroy",value:function(){this.RecivedErrorSub.unsubscribe(),this.PageChanged.unsubscribe(),this.DataLoading.unsubscribe(),this.FetchOnInint.unsubscribe()}},{key:"ngOnInit",value:function(){var e=this;this.sesPageSize=f.a.SessionsListPageSize,this.RecivedErrorSub=this.DataServ.RecivedError.subscribe((function(t){switch(e.ShowMessage=!0,e.ResponseFromBackend=t,setTimeout((function(){return e.ShowMessage=!1}),5e3),t.Error.Code){case 200:e.MessageType="success";break;default:e.MessageType="danger"}})),this.PageChanged=this.ActiveRoute.params.subscribe((function(t){e.sesCurrentPage=+t.pn,e.GetRecentData()})),this.DataLoading=this.DataServ.LoadingData.subscribe((function(t){e.IsLoading=t}))}},{key:"GetRecentData",value:function(){var e=this;this.FetchOnInint=this.DataServ.FetchSessionsList(this.sesCurrentPage,f.a.SessionsListPageSize).subscribe((function(t){e.Sessions=e.SessServ.GetSessions(),e.sesCollectionSize=e.SessServ.Total}),(function(t){e.Sessions=[]}))}},{key:"OnPageChanged",value:function(e){this.sesCurrentPage=e,this.router.navigate(["../",e.toString()],{relativeTo:this.ActiveRoute})}},{key:"OnDeleteSession",value:function(e,t){this.SessServ.DeleteSession(t),this.DataServ.DeleteSessionByToken(e.Token),this.Sessions=this.SessServ.GetSessions()}},{key:"OnDeleteSessionByEmail",value:function(e){e.valid&&(console.log(e.value),this.DataServ.DeleteSessionByEmail(e.value.useremail),this.GetRecentData())}}]),t}()).\u0275fac=function(e){return new(e||le)(v.Kb(l.a),v.Kb(h.a),v.Kb(re.a),v.Kb(l.c))},le.\u0275cmp=v.Eb({type:le,selectors:[["app-sessions-list"]],decls:3,vars:2,consts:[["class","row",4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"row"],[1,"col"],[3,"type","close",4,"ngIf"],[1,"mt-1","mb-1",3,"ngSubmit"],["DelSesByEmailForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","placeholder","exampe@example.com","name","useremail","ngModel","","required","","email","",1,"form-control","mb-1"],["type","submit",1,"btn","btn-outline-danger"],[1,"list-group","mb-1"],["style","cursor: pointer;","class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange",4,"ngIf"],[3,"type","close"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center",2,"cursor","pointer",3,"ngClass","click"],[1,"input-group"],[1,"p-2","m-0","flex-grow-1",2,"place-items","center"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-success",3,"routerLink"],["type","button",1,"btn","btn-outline-danger",3,"click"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){1&e&&(v.vc(0,be,14,3,"div",0),v.Pb(1,"div",1),v.vc(2,ue,3,0,"div",2),v.Ob()),2&e&&(v.fc("ngIf",!t.IsLoading),v.xb(2),v.fc("ngIf",t.IsLoading))},directives:[b.k,u.r,u.i,u.j,u.b,u.h,u.k,u.o,u.c,b.j,d.a,b.i,l.d,d.i],styles:[""]}),le),me=((de=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||de)},de.\u0275cmp=v.Eb({type:de,selectors:[["app-sessions-edit"]],decls:2,vars:0,template:function(e,t){1&e&&(v.Pb(0,"p"),v.xc(1,"sessions-edit works!"),v.Ob())},styles:[""]}),de),ve=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",component:O,canActivate:[g.a],children:[{path:"",redirectTo:"1",pathMatch:"full"},{path:":pn",component:j,canActivate:[p.a],data:{expectedRole:"admin_role_CRUD"}},{path:":pn/new",component:E},{path:":pn/:id",component:E,resolve:[x]}]},{path:"sessions",component:O,canActivate:[g.a],children:[{path:"",redirectTo:"1",pathMatch:"full"},{path:":pn",component:fe,canActivate:[p.a],data:{expectedRole:"admin_role_CRUD"}},{path:":pn/new",component:me},{path:":pn/:id",component:me,resolve:[S]}]},{path:"media",component:O,canActivate:[g.a],children:[{path:"",redirectTo:"1",pathMatch:"full"},{path:":pn",component:N,canActivate:[p.a],data:{expectedRole:"admin_role_CRUD"}},{path:":pn/new",component:ae},{path:":pn/:id",component:ae,resolve:[P]}]}],he=((pe=function t(){e(this,t)}).\u0275mod=v.Ib({type:pe}),pe.\u0275inj=v.Hb({factory:function(e){return new(e||pe)},imports:[[l.g.forChild(ve)],l.g]}),pe),xe=((ge=function t(){e(this,t)}).\u0275mod=v.Ib({type:ge}),ge.\u0275inj=v.Hb({factory:function(e){return new(e||ge)},imports:[[b.b,u.d,d.b,d.j,he]]}),ge)}}])}();