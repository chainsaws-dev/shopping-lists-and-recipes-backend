!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{CXQP:function(t,i,o){"use strict";o.r(i),o.d(i,"ShoppingListModule",(function(){return k}));var r=o("ofXK"),a=o("AytR"),c=o("fXoL"),s=o("ozzT"),u=o("tyNb"),b=o("GXvH"),l=o("EiSp"),p=o("3Pt+"),g=["f"];function d(e,t){if(1&e){var n=c.Qb();c.Pb(0,"button",14),c.ac("click",(function(){return c.pc(n),c.cc().DeleteSelectedItem()})),c.yc(1,"Delete"),c.Ob()}}function h(e,t){if(1&e){var n=c.Qb();c.Pb(0,"button",15),c.ac("click",(function(){return c.pc(n),c.cc().ClearAllItems()})),c.yc(1,"Clear"),c.Ob()}}var f,v=((f=function(){function t(n,i){e(this,t),this.ShopListServ=n,this.DataServ=i,this.editmode=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.ingselected=this.ShopListServ.IngredientSelected.subscribe((function(t){e.selectedingredient=t,e.editmode=!0,e.slEditForm.setValue({name:e.selectedingredient.Name,amount:e.selectedingredient.Amount})}))}},{key:"ngOnDestroy",value:function(){this.ingselected.unsubscribe()}},{key:"AddNewItem",value:function(e){if(e.valid){var t=e.value;this.DataServ.SaveShoppingList(this.ShopListServ.AddNewItem(new l.a(t.name,parseInt(t.amount,10))))}}},{key:"UpdateItem",value:function(e){if(e.valid){var t=e.value,n=new l.a(t.name,parseInt(t.amount,10));this.ShopListServ.UpdateSelectedItem(n),this.DataServ.SaveShoppingList(n),this.editmode=!1,this.slEditForm.reset()}}},{key:"DeleteSelectedItem",value:function(){var e=this.ShopListServ.DeleteSelectedItem();this.DataServ.DeleteShoppingList(e)}},{key:"ClearAllItems",value:function(){this.ShopListServ.ClearAll()}}]),t}()).\u0275fac=function(e){return new(e||f)(c.Kb(s.a),c.Kb(b.a))},f.\u0275cmp=c.Eb({type:f,selectors:[["app-shopping-edit"]],viewQuery:function(e,t){var n;1&e&&c.Cc(g,!0),2&e&&c.nc(n=c.bc())&&(t.slEditForm=n.first)},decls:18,vars:4,consts:[[1,"row"],[1,"col"],[3,"ngSubmit"],["f","ngForm"],[1,"input-group","mt-3"],[1,"col-sm-9","form-group"],["type","text","id","name","placeholder","Name","name","name","ngModel","","required","",1,"form-control"],[1,"col","form-group"],["type","number","id","amount","placeholder","Amount","name","amount","ngModel","","required","","pattern","^[1-9]+[0-9]*$",1,"form-control"],[1,"input-group"],[1,"input-group-prepend"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],["class","btn btn-outline-danger","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-secondary","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){if(1&e){var n=c.Qb();c.Pb(0,"div",0),c.Pb(1,"div",1),c.Pb(2,"form",2,3),c.ac("ngSubmit",(function(){c.pc(n);var e=c.oc(3);return t.editmode?t.UpdateItem(e):t.AddNewItem(e)})),c.Pb(4,"div",0),c.Pb(5,"div",4),c.Pb(6,"div",5),c.Lb(7,"input",6),c.Ob(),c.Pb(8,"div",7),c.Lb(9,"input",8),c.Ob(),c.Ob(),c.Ob(),c.Pb(10,"div",0),c.Pb(11,"div",1),c.Pb(12,"div",9),c.Pb(13,"div",10),c.Pb(14,"button",11),c.yc(15),c.Ob(),c.wc(16,d,2,0,"button",12),c.wc(17,h,2,0,"button",13),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()}if(2&e){var i=c.oc(3);c.xb(14),c.hc("disabled",i.invalid),c.xb(1),c.zc(t.editmode?"Update":"Add"),c.xb(1),c.hc("ngIf",t.ShopListServ.CurrentSelectedItem),c.xb(1),c.hc("ngIf",0!==t.ShopListServ.GetIngredientsLength())}},directives:[p.p,p.h,p.i,p.a,p.g,p.j,p.n,p.l,p.m,r.l],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(255,10,29,.25)!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(52,179,13,.25)!important}"]}),f),S=o("1kSV");function m(e,t){if(1&e){var n=c.Qb();c.Pb(0,"ngb-alert",9),c.ac("close",(function(){return c.pc(n),c.cc(2).ShowMessage=!1})),c.yc(1),c.Ob()}if(2&e){var i=c.cc(2);c.hc("type",i.MessageType),c.xb(1),c.zc(i.ResponseFromBackend.Error.Message)}}function y(e,t){if(1&e){var n=c.Qb();c.Pb(0,"a",10),c.ac("click",(function(){c.pc(n);var e=t.$implicit;return c.cc(2).ShopListServ.SelectItemShopList(e)})),c.yc(1),c.Pb(2,"span",11),c.yc(3),c.Ob(),c.Ob()}if(2&e){var i=t.$implicit,o=c.cc(2);c.hc("ngClass",o.ShopListServ.IsCurrentSelected(i)?"active":""),c.xb(1),c.Ac("",i.Name," "),c.xb(2),c.zc(i.Amount)}}function P(e,t){if(1&e){var n=c.Qb();c.Pb(0,"ngb-pagination",12),c.ac("pageChange",(function(e){return c.pc(n),c.cc(2).OnPageChanged(e)})),c.Ob()}if(2&e){var i=c.cc(2);c.hc("collectionSize",i.slcollectionSize)("pageSize",i.slPageSize)("page",i.slCurrentPage)("rotate",!0)("boundaryLinks",!0)("maxSize",11)}}function I(e,t){if(1&e&&(c.Pb(0,"div",3),c.Pb(1,"div",4),c.Lb(2,"app-shopping-edit"),c.Lb(3,"hr"),c.wc(4,m,2,2,"ngb-alert",5),c.Pb(5,"ul",6),c.wc(6,y,4,3,"a",7),c.Ob(),c.wc(7,P,1,6,"ngb-pagination",8),c.Ob(),c.Ob()),2&e){var n=c.cc();c.xb(4),c.hc("ngIf",n.ShowMessage),c.xb(2),c.hc("ngForOf",n.ingredients),c.xb(1),c.hc("ngIf",n.slcollectionSize>n.slPageSize)}}function L(e,t){1&e&&(c.Pb(0,"div",13),c.Pb(1,"span",14),c.yc(2,"Loading..."),c.Ob(),c.Ob())}var O,w,C=[{path:"",redirectTo:"1",pathMatch:"full"},{path:":pn",component:(O=function(){function t(n,i,o,r){e(this,t),this.ShopListServ=n,this.activeroute=i,this.DataServ=o,this.router=r}return n(t,[{key:"ngOnDestroy",value:function(){this.IngChanged.unsubscribe(),this.PageChanged.unsubscribe(),this.FetchOnInint.unsubscribe(),this.DataLoading.unsubscribe(),this.RecivedErrorSub.unsubscribe()}},{key:"ngOnInit",value:function(){var e=this;this.slPageSize=a.a.ShoppingListPageSize,this.RecivedErrorSub=this.DataServ.RecivedError.subscribe((function(t){switch(e.ShowMessage=!0,e.ResponseFromBackend=t,setTimeout((function(){return e.ShowMessage=!1}),5e3),t.Error.Code){case 200:e.MessageType="success";break;default:e.MessageType="danger"}})),this.IngChanged=this.ShopListServ.IngredientChanged.subscribe((function(t){e.ingredients=t})),this.PageChanged=this.activeroute.params.subscribe((function(t){e.slCurrentPage=+t.pn})),this.DataLoading=this.DataServ.LoadingData.subscribe((function(t){e.IsLoading=t})),this.FetchOnInint=this.DataServ.FetchShoppingList(this.slCurrentPage,a.a.ShoppingListPageSize).subscribe((function(t){e.ingredients=e.ShopListServ.GetIngredients(),e.slcollectionSize=e.ShopListServ.Total}),(function(t){e.ingredients=[]}))}},{key:"OnPageChanged",value:function(e){var t=this;this.slCurrentPage=e,this.FetchOnInint=this.DataServ.FetchShoppingList(e,a.a.ShoppingListPageSize).subscribe((function(){t.ingredients=t.ShopListServ.GetIngredients(),t.slcollectionSize=t.ShopListServ.Total,t.router.navigate(["../",e.toString()],{relativeTo:t.activeroute})}))}}]),t}(),O.\u0275fac=function(e){return new(e||O)(c.Kb(s.a),c.Kb(u.a),c.Kb(b.a),c.Kb(u.c))},O.\u0275cmp=c.Eb({type:O,selectors:[["app-shopping-list"]],decls:3,vars:2,consts:[["class","row",4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"row"],[1,"col"],[3,"type","close",4,"ngIf"],[1,"list-group"],["style","cursor: pointer;","class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange",4,"ngIf"],[3,"type","close"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center",2,"cursor","pointer",3,"ngClass","click"],[1,"badge","badge-success","badge-pill"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){1&e&&(c.wc(0,I,8,3,"div",0),c.Pb(1,"div",1),c.wc(2,L,3,0,"div",2),c.Ob()),2&e&&(c.hc("ngIf",!t.IsLoading),c.xb(2),c.hc("ngIf",t.IsLoading))},directives:[r.l,v,r.k,S.a,r.j,S.i],styles:[""]}),O)}],k=((w=function t(){e(this,t)}).\u0275mod=c.Ib({type:w}),w.\u0275inj=c.Hb({factory:function(e){return new(e||w)},imports:[[r.b,p.c,S.b,S.j,u.g.forChild(C)]]}),w)}}])}();