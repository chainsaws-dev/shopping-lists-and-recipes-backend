!function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{EiSp:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var r=function e(t,i){n(this,e),this.Name=t,this.Amount=i}},GXvH:function(e,i,r){"use strict";r.d(i,"a",(function(){return l}));var s=r("tk/3"),a=r("qc5x"),c=r("lJxs"),o=r("vkgz"),d=r("AytR"),u=r("XNiG"),h=r("fXoL"),p=r("ceC1"),g=r("ozzT"),l=function(){var e=function(){function e(t,i,r){n(this,e),this.http=t,this.recipes=i,this.shoppinglist=r,this.LoadingData=new u.a,this.RecipesUpdateInsert=new u.a,this.RecivedError=new u.a,this.PaginationSet=new u.a}return t(e,[{key:"FetchRecipes",value:function(e,t){var n=this;this.LoadingData.next(!0);var i={headers:new s.d({Page:e.toString(),Limit:t.toString()})};return this.http.get(d.a.GetSetRecipesUrl+"?key="+d.a.ApiKey,i).pipe(Object(c.a)((function(e){return e.Recipes=e.Recipes.map((function(e){return Object.assign(Object.assign({},e),{Ingredients:e.Ingredients?e.Ingredients:[]})})),e})),Object(o.a)((function(e){n.recipes.SetRecipes(e.Recipes),n.PaginationSet.next(new a.b(e.Total,e.Limit,e.Offset)),n.LoadingData.next(!1)}),(function(e){n.RecivedError.next(e.error),n.LoadingData.next(!1)})))}},{key:"SearchRecipes",value:function(e,t,n){var i=this;this.LoadingData.next(!0);var r={headers:new s.d({Page:e.toString(),Limit:t.toString(),Search:n})};return this.http.get(d.a.SearchRecipesUrl+"?key="+d.a.ApiKey,r).pipe(Object(c.a)((function(e){return e.Recipes=e.Recipes.map((function(e){return Object.assign(Object.assign({},e),{Ingredients:e.Ingredients?e.Ingredients:[]})})),e})),Object(o.a)((function(e){i.recipes.SetRecipes(e.Recipes),i.PaginationSet.next(new a.b(e.Total,e.Limit,e.Offset)),i.LoadingData.next(!1)}),(function(e){i.RecivedError.next(e.error),i.LoadingData.next(!1)})))}},{key:"SaveRecipe",value:function(e){var t=this;this.LoadingData.next(!0),this.http.post(d.a.GetSetRecipesUrl+"?key="+d.a.ApiKey,e).subscribe((function(e){t.RecipesUpdateInsert.next(e),t.RecivedError.next(new a.a(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),t.LoadingData.next(!1)}),(function(e){t.RecivedError.next(e.error),t.LoadingData.next(!1)}))}},{key:"DeleteRecipe",value:function(e){var t=this;this.LoadingData.next(!0);var n={headers:new s.d({RecipeID:e.ID.toString()})};this.http.delete(d.a.GetSetRecipesUrl+"?key="+d.a.ApiKey,n).subscribe((function(e){t.RecivedError.next(e),t.LoadingData.next(!1)}),(function(e){t.RecivedError.next(e.error),t.LoadingData.next(!1)}))}},{key:"FetchShoppingList",value:function(e,t){var n=this;this.LoadingData.next(!0);var i={headers:new s.d({Page:e.toString(),Limit:t.toString()})};return this.http.get(d.a.GetSetShoppingListUrl+"?key="+d.a.ApiKey,i).pipe(Object(o.a)((function(e){n.shoppinglist.SetIngredients(e.Items),n.shoppinglist.SetPagination(e.Total,e.Limit,e.Offset),n.LoadingData.next(!1)}),(function(e){n.RecivedError.next(e.error),n.LoadingData.next(!1)})))}},{key:"SaveShoppingList",value:function(e){var t=this;this.LoadingData.next(!0),this.http.post(d.a.GetSetShoppingListUrl+"?key="+d.a.ApiKey,e).subscribe((function(e){t.RecipesUpdateInsert.next(e),t.RecivedError.next(new a.a(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),t.LoadingData.next(!1)}),(function(e){t.RecivedError.next(e.error),t.LoadingData.next(!1)}))}},{key:"DeleteShoppingList",value:function(e){var t=this;this.LoadingData.next(!0);var n={headers:new s.d({IngName:encodeURI(e.Name)})};this.http.delete(d.a.GetSetShoppingListUrl+"?key="+d.a.ApiKey,n).subscribe((function(e){t.RecivedError.next(e),t.LoadingData.next(!1)}),(function(e){t.RecivedError.next(e.error),t.LoadingData.next(!1)}))}},{key:"DeleteAllShoppingList",value:function(){var e=this;this.http.delete(d.a.GetSetShoppingListUrl+"?key="+d.a.ApiKey).subscribe((function(t){e.RecivedError.next(t),e.LoadingData.next(!1)}),(function(t){e.RecivedError.next(t.error),e.LoadingData.next(!1)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Xb(s.a),h.Xb(p.a),h.Xb(g.a))},e.\u0275prov=h.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ceC1:function(e,i,r){"use strict";r.d(i,"a",(function(){return h}));var s=r("qc5x"),a=r("EiSp"),c=r("XNiG"),o=r("AytR"),d=r("fXoL"),u=r("ozzT"),h=function(){var e=function(){function e(t){n(this,e),this.ShopList=t,this.IngredientSelected=new c.a,this.RecipeChanged=new c.a,this.RecipesUpdated=new c.a,this.RecipesInserted=new c.a,this.RecipesDeleted=new c.a,this.recipes=[]}return t(e,[{key:"GetRecipes",value:function(){return this.recipes.slice(0,o.a.RecipePageSize)}},{key:"GetRecipesLen",value:function(){return this.recipes.length}},{key:"GetRecipeById",value:function(e){return e<this.recipes.length&&e>0?this.recipes[e]:this.recipes[0]}},{key:"GetRecipeId",value:function(e){return this.recipes.indexOf(e)}},{key:"SendToShoppingList",value:function(e){var t=this;e.forEach((function(e){t.ShopList.AddNewItem(e)}))}},{key:"GetShoppingList",value:function(){return this.ShopList.GetIngredients()}},{key:"AddNewRecipe",value:function(e){var t=new s.c(e.Name,e.Description,e.ImagePath,e.Ingredients,e.ImageDbID,e.ID);this.recipes.length<o.a.RecipePageSize&&this.recipes.push(t),this.RecipeChanged.next(t),this.RecipesInserted.next()}},{key:"UpdateExistingRecipe",value:function(e,t){this.recipes[t]=e,this.RecipeChanged.next(e)}},{key:"SetRecipes",value:function(e){this.recipes=e,this.RecipesUpdated.next()}},{key:"DeleteRecipe",value:function(e){this.recipes.splice(e,1),this.RecipesDeleted.next()}},{key:"AddNewIngredient",value:function(e){var t=this.RecipeToEdit.Ingredients.find((function(t){return t.Name===e.Name}));t?t.Amount=t.Amount+e.Amount:this.RecipeToEdit.Ingredients.push(new a.a(e.Name,e.Amount))}},{key:"UpdateSelectedIngredient",value:function(e){var t=this,n=this.RecipeToEdit.Ingredients.find((function(t){return t.Name===e.Name}));if(n&&n!==this.CurrentSelectedItem)n.Name=e.Name,n.Amount=n.Amount+e.Amount,this.DeleteSelectedIngredient();else{var i=this.RecipeToEdit.Ingredients.find((function(e){return e===t.CurrentSelectedItem}));i&&(i.Name=e.Name,i.Amount=e.Amount)}this.CurrentSelectedItem=null,this.IngredientSelected.next(this.CurrentSelectedItem)}},{key:"DeleteSelectedIngredient",value:function(){var e=this.RecipeToEdit.Ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.RecipeToEdit.Ingredients.splice(e,1),this.CurrentSelectedItem=null}},{key:"ClearAllIngredients",value:function(){this.RecipeToEdit.Ingredients=[],this.CurrentSelectedItem=null}},{key:"GetIngredientsLength",value:function(){return this.RecipeToEdit.Ingredients.length}},{key:"IngredientSelect",value:function(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Xb(u.a))},e.\u0275prov=d.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ozzT:function(e,i,r){"use strict";r.d(i,"a",(function(){return d}));var s=r("EiSp"),a=r("XNiG"),c=r("AytR"),o=r("fXoL"),d=function(){var e=function(){function e(){n(this,e),this.IngredientSelected=new a.a,this.IngredientChanged=new a.a,this.IngredientsUpdated=new a.a,this.IngredientAdded=new a.a,this.IngredientUpdated=new a.a,this.IngredientDeleted=new a.a,this.IngredientClear=new a.a,this.ingredients=[]}return t(e,[{key:"GetIngredients",value:function(){return this.ingredients.slice()}},{key:"GetIngredientsLength",value:function(){return this.ingredients.length}},{key:"SetIngredients",value:function(e){this.ingredients=e,this.IngredientsUpdated.next()}},{key:"SetPagination",value:function(e,t,n){this.Total=e}},{key:"AddNewItem",value:function(e){var t=this.ingredients.find((function(t){return t.Name===e.Name}));t?t.Amount=t.Amount+e.Amount:(t=e,this.ingredients.length<c.a.ShoppingListPageSize&&this.ingredients.push(new s.a(e.Name,e.Amount))),this.IngredientAdded.next(t),this.IngredientChanged.next(this.ingredients.slice())}},{key:"UpdateSelectedItem",value:function(e){var t=this.ingredients.find((function(t){return t.Name===e.Name}));if(t&&t!==this.CurrentSelectedItem)t.Name=e.Name,t.Amount=t.Amount+e.Amount,this.DeleteSelectedItem();else{var n=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==n&&(this.ingredients[n]=e,this.IngredientChanged.next(this.ingredients.slice())),t=this.CurrentSelectedItem}this.IngredientUpdated.next(t),this.CurrentSelectedItem=null}},{key:"DeleteSelectedItem",value:function(){var e=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.ingredients.splice(e,1),this.IngredientDeleted.next(this.CurrentSelectedItem),this.IngredientChanged.next(this.ingredients.slice()),this.CurrentSelectedItem=null}},{key:"ClearAll",value:function(){this.ingredients=[],this.CurrentSelectedItem=null,this.IngredientChanged.next(this.ingredients.slice()),this.SetPagination(0,0,0),this.IngredientClear.next()}},{key:"SelectItemShopList",value:function(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}},{key:"IsCurrentSelected",value:function(e){return this.CurrentSelectedItem===e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},qc5x:function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return c}));var r=function e(t,i,r,s,a,c){n(this,e),this.Name=t,this.Description=i,this.ImagePath=r,this.Ingredients=s,this.ImageDbID=a,this.ID=c},s=function e(t,i){n(this,e),this.Error=new a(t,i)},a=function e(t,i){n(this,e),this.Code=t,this.Message=i},c=function e(t,i,r){n(this,e),this.Total=t,this.Limit=i,this.Offset=r}}}])}();