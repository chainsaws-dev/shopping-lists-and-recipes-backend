(self.webpackChunkshopping_lists_and_recipes=self.webpackChunkshopping_lists_and_recipes||[]).push([[255],{250:function(e,t,i){"use strict";i.d(t,{P:function(){return s}});class s{constructor(e,t,i,s,n,r){this.Filename=e,this.Filesize=t,this.Filetype=i,this.FileID=s,this.ID=r,this.PreviewID=n}}},902:function(e,t,i){"use strict";i.d(t,{y:function(){return a}});var s=i(250),n=i(3559),r=i(529),h=i(5366);let a=(()=>{class e{constructor(){this.FileSelected=new n.xQ,this.FilesUpdated=new n.xQ,this.FilesInserted=new n.xQ,this.FilesDeleted=new n.xQ,this.FilesChanged=new n.xQ,this.Files=[]}GetFiles(){return this.Files.slice()}SetFiles(e){this.Files=e,this.FilesUpdated.next()}SetPagination(e,t,i){this.Total=e}SelectItemFilesList(e){this.CurrentSelectedItem=e,this.FileSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}GetFileById(e){return e<this.Files.length&&e>0?this.Files[e]:this.Files[0]}UpdateExistingFile(e,t){this.Files[t]=e,this.FilesChanged.next(e)}AddNewFile(e){const t=new s.P(e.Filename,e.Filesize,e.Filetype,e.FileID,e.PreviewID,e.ID);this.Files.length<r.N.AdminUserListPageSize&&this.Files.push(t),this.FilesChanged.next(t),this.FilesInserted.next()}DeleteFile(e){this.Files.splice(e,1),this.FilesDeleted.next()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},4374:function(e,t,i){"use strict";i.d(t,{j:function(){return r}});var s=i(3559),n=i(5366);let r=(()=>{class e{constructor(){this.SessionsUpdated=new s.xQ,this.SessionsInserted=new s.xQ,this.SessionsDeleted=new s.xQ,this.SessionsChanged=new s.xQ,this.SessionsSelected=new s.xQ,this.Sessions=[]}GetSessions(){return this.Sessions.slice()}SetSessions(e){this.Sessions=e,this.SessionsUpdated.next()}SetPagination(e,t,i){this.Total=e}SelectItemSessionsList(e){this.CurrentSelectedItem=e,this.SessionsSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}GetSessionById(e){return e<this.Sessions.length&&e>0?this.Sessions[e]:this.Sessions[0]}DeleteSession(e){this.Sessions.splice(e,1),this.SessionsDeleted.next()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7446:function(e,t,i){"use strict";i.d(t,{n:function(){return s}});class s{constructor(e,t,i,s){this.GUID="",this.Role=e,this.Email=t,this.Phone=i,this.Name=s,this.IsAdmin=!1,this.Confirmed=!1,this.SecondFactor=!1,this.Disabled=!1}}},318:function(e,t,i){"use strict";i.d(t,{f:function(){return a}});var s=i(7446),n=i(3559),r=i(529),h=i(5366);let a=(()=>{class e{constructor(){this.UserSelected=new n.xQ,this.UsersUpdated=new n.xQ,this.UsersInserted=new n.xQ,this.UsersDeleted=new n.xQ,this.UsersChanged=new n.xQ,this.Users=[]}GetUsers(){return this.Users.slice()}SetUsers(e){this.Users=e,this.UsersUpdated.next()}SetPagination(e,t,i){this.Total=e}SelectItemUsersList(e){this.CurrentSelectedItem=e,this.UserSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}GetUserById(e){return e<this.Users.length&&e>0?this.Users[e]:this.Users[0]}UpdateExistingUser(e,t){this.Users[t]=e,this.UsersChanged.next(e)}AddNewUser(e){const t=new s.n(e.Role,e.Email,e.Phone,e.Name);this.Users.length<r.N.AdminUserListPageSize&&this.Users.push(t),this.UsersChanged.next(t),this.UsersInserted.next()}DeleteUser(e){this.Users.splice(e,1),this.UsersDeleted.next()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3339:function(e,t,i){"use strict";i.d(t,{p:function(){return s}});class s{constructor(e,t,i,s,n,r){this.Name=e,this.Description=t,this.ImagePath=i,this.Ingredients=s,this.ImageDbID=n,this.ID=r}}},873:function(e,t,i){"use strict";i.d(t,{j:function(){return d}});var s=i(3339),n=i(8897),r=i(3559),h=i(529),a=i(5366),o=i(2955);let d=(()=>{class e{constructor(e){this.ShopList=e,this.IngredientSelected=new r.xQ,this.RecipeChanged=new r.xQ,this.RecipesUpdated=new r.xQ,this.RecipesInserted=new r.xQ,this.RecipesDeleted=new r.xQ,this.recipes=[]}GetRecipes(){return this.recipes.slice(0,h.N.RecipePageSize)}GetRecipesLen(){return this.recipes.length}GetRecipeById(e){return e<this.recipes.length&&e>0?this.recipes[e]:this.recipes[0]}GetRecipeId(e){return this.recipes.indexOf(e)}SendToShoppingList(e){e.forEach(e=>{this.ShopList.AddNewItem(e,!0)})}GetShoppingList(){return this.ShopList.GetIngredients()}AddNewRecipe(e){const t=new s.p(e.Name,e.Description,e.ImagePath,e.Ingredients,e.ImageDbID,e.ID);this.recipes.length<h.N.RecipePageSize&&this.recipes.push(t),this.RecipeChanged.next(t),this.RecipesInserted.next()}UpdateExistingRecipe(e,t){this.recipes[t]=e,this.RecipeChanged.next(e)}SetRecipes(e){this.recipes=e,this.RecipesUpdated.next()}DeleteRecipe(e){this.recipes.splice(e,1),this.RecipesDeleted.next()}AddNewIngredient(e){const t=this.RecipeToEdit.Ingredients.find(t=>t.Name===e.Name);t?t.Amount=t.Amount+e.Amount:this.RecipeToEdit.Ingredients.push(new n.o7(e.Name,e.Amount))}UpdateSelectedIngredient(e){const t=this.RecipeToEdit.Ingredients.find(t=>t.Name===e.Name);if(t&&t!==this.CurrentSelectedItem)t.Name=e.Name,t.Amount=t.Amount+e.Amount,this.DeleteSelectedIngredient();else{const t=this.RecipeToEdit.Ingredients.find(e=>e===this.CurrentSelectedItem);t&&(t.Name=e.Name,t.Amount=e.Amount)}this.CurrentSelectedItem=null,this.IngredientSelected.next(this.CurrentSelectedItem)}DeleteSelectedIngredient(){const e=this.RecipeToEdit.Ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.RecipeToEdit.Ingredients.splice(e,1),this.CurrentSelectedItem=null}ClearAllIngredients(){this.RecipeToEdit.Ingredients=[],this.CurrentSelectedItem=null}GetIngredientsLength(){return this.RecipeToEdit.Ingredients.length}IngredientSelect(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(o._))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2255:function(e,t,i){"use strict";i.d(t,{Z:function(){return x}});var s=i(2693),n=i(8897),r=i(9996),h=i(4019),a=i(529),o=i(3559),d=i(5366),c=i(873),l=i(2955),g=i(318),p=i(902),u=i(4374);let x=(()=>{class e{constructor(e,t,i,s,n,r){this.http=e,this.recipes=t,this.shoppinglist=i,this.users=s,this.media=n,this.sessions=r,this.LoadingData=new o.xQ,this.RecipesUpdateInsert=new o.xQ,this.RecivedError=new o.xQ,this.PaginationSet=new o.xQ,this.FileUploadProgress=new o.xQ,this.FileUploaded=new o.xQ,this.UserUpdateInsert=new o.xQ,this.CurrentUserFetch=new o.xQ,this.TwoFactorSub=new o.xQ}FetchRecipes(e,t){this.LoadingData.next(!0);const i={headers:new s.WM({Page:e.toString(),Limit:t.toString()})};return this.http.get(a.N.GetSetRecipesUrl,i).pipe((0,r.U)(e=>(e.Recipes=e.Recipes.map(e=>Object.assign(Object.assign({},e),{Ingredients:e.Ingredients?e.Ingredients:[]})),e)),(0,h.b)(e=>{this.recipes.SetRecipes(e.Recipes),this.PaginationSet.next(new n.tl(e.Total,e.Limit,e.Offset)),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SearchRecipes(e,t,i){this.LoadingData.next(!0);const o={headers:new s.WM({Page:e.toString(),Limit:t.toString(),Search:i})};return this.http.get(a.N.SearchRecipesUrl,o).pipe((0,r.U)(e=>(e.Recipes=e.Recipes.map(e=>Object.assign(Object.assign({},e),{Ingredients:e.Ingredients?e.Ingredients:[]})),e)),(0,h.b)(e=>{this.recipes.SetRecipes(e.Recipes),this.PaginationSet.next(new n.tl(e.Total,e.Limit,e.Offset)),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SaveRecipe(e){this.LoadingData.next(!0),this.http.post(a.N.GetSetRecipesUrl,e).subscribe(e=>{this.RecipesUpdateInsert.next(e),this.RecivedError.next(new n.iQ(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchFilesList(e,t){this.LoadingData.next(!0);const i={headers:new s.WM({Page:e.toString(),Limit:t.toString()})};return this.http.get(a.N.GetSetFileUrl,i).pipe((0,h.b)(e=>{this.media.SetFiles(e.Files),this.media.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}FileUpload(e){const t=new FormData;t.append("file",e,e.name),this.http.post(a.N.GetSetFileUrl,t,{headers:new s.WM({}),reportProgress:!0,observe:"events"}).subscribe(e=>{e.type===s.dt.UploadProgress?this.FileUploadProgress.next(String(e.loaded/e.total*100)):e.type===s.dt.Response&&e.ok&&this.FileUploaded.next(e.body)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteFile(e,t){this.LoadingData.next(!0);const i={headers:new s.WM({FileID:e.toString()})};this.http.delete(a.N.GetSetFileUrl,i).subscribe(e=>{t||this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteRecipe(e){this.LoadingData.next(!0);const t={headers:new s.WM({RecipeID:e.ID.toString()})};this.http.delete(a.N.GetSetRecipesUrl,t).subscribe(t=>{this.RecivedError.next(t),this.LoadingData.next(!1),this.DeleteFile(e.ImageDbID,!0)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchShoppingList(e,t){this.LoadingData.next(!0);const i={headers:new s.WM({Page:e.toString(),Limit:t.toString()})};return this.http.get(a.N.GetSetShoppingListUrl,i).pipe((0,h.b)(e=>{this.shoppinglist.SetIngredients(e.Items),this.shoppinglist.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}SaveShoppingList(e){this.LoadingData.next(!0),this.http.post(a.N.GetSetShoppingListUrl,e).subscribe(e=>{this.RecipesUpdateInsert.next(e),this.RecivedError.next(new n.iQ(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteShoppingList(e){this.LoadingData.next(!0);const t={headers:new s.WM({IngName:encodeURI(e.Name)})};this.http.delete(a.N.GetSetShoppingListUrl,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteAllShoppingList(){this.http.delete(a.N.GetSetShoppingListUrl).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchSessionsList(e,t){this.LoadingData.next(!0);const i={headers:new s.WM({Page:e.toString(),Limit:t.toString()})};return this.http.get(a.N.GetSetSessionsUrl,i).pipe((0,h.b)(e=>{this.sessions.SetSessions(e.Sessions),this.sessions.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}DeleteSessionByToken(e){this.LoadingData.next(!0);const t={headers:new s.WM({Token:e})};this.http.delete(a.N.GetSetSessionsUrl,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}DeleteSessionByEmail(e){this.LoadingData.next(!0);const t={headers:new s.WM({Email:e})};this.http.delete(a.N.GetSetSessionsUrl,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}FetchUsersList(e,t){this.LoadingData.next(!0);const i={headers:new s.WM({Page:e.toString(),Limit:t.toString()})};return this.http.get(a.N.GetSetUsersUrl,i).pipe((0,h.b)(e=>{this.users.SetUsers(e.Users),this.users.SetPagination(e.Total,e.Limit,e.Offset),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)}))}FetchCurrentUser(){return this.LoadingData.next(!0),this.http.get(a.N.GetSetCurrentUserUrl).subscribe(e=>{this.CurrentUserFetch.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SaveCurrentUser(e,t,i){this.LoadingData.next(!0),0===e.GUID.length&&(e.GUID="00000000-0000-0000-0000-000000000000"),this.GetObsForSaveCurrentUser(e,t,i).subscribe(e=>{this.UserUpdateInsert.next(e),this.RecivedError.next(new n.iQ(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SaveUser(e,t,i){this.LoadingData.next(!0),0===e.GUID.length&&(e.GUID="00000000-0000-0000-0000-000000000000"),this.GetObsForSaveUser(e,t,i).subscribe(e=>{this.UserUpdateInsert.next(e),this.RecivedError.next(new n.iQ(200,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}LinkTwoFactor(e,t){const i={headers:new s.WM({Passcode:e})};this.http.post(a.N.TOTPSettingsUrl,t,i).subscribe(e=>{t.SecondFactor=!0,this.TwoFactorSub.next(t),this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}UnlinkTwoFactor(e){this.http.delete(a.N.TOTPSettingsUrl).subscribe(t=>{e.SecondFactor=!1,this.TwoFactorSub.next(e),this.RecivedError.next(t),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}GetObsForSaveCurrentUser(e,t,i){if(t){const t={headers:new s.WM({NewPassword:encodeURI(i)})};return this.http.post(a.N.GetSetCurrentUserUrl,e,t)}return this.http.post(a.N.GetSetCurrentUserUrl,e)}GetObsForSaveUser(e,t,i){if(t){const t={headers:new s.WM({NewPassword:encodeURI(i)})};return this.http.post(a.N.GetSetUsersUrl,e,t)}return this.http.post(a.N.GetSetUsersUrl,e)}DeleteUser(e){this.LoadingData.next(!0);const t={headers:new s.WM({UserID:encodeURI(e.GUID)})};this.http.delete(a.N.GetSetUsersUrl,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}ConfirmEmail(e){this.LoadingData.next(!0);const t={headers:new s.WM({Token:e})};this.http.post(a.N.ConfirmEmailUrl,null,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SendEmailConfirmEmail(e){this.LoadingData.next(!0);const t={headers:new s.WM({Email:e})};this.http.post(a.N.ResendEmailUrl,null,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SendEmailResetPassword(e){this.LoadingData.next(!0);const t={headers:new s.WM({Email:e})};this.http.post(a.N.SendEmailResetPassUrl,null,t).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}SubmitNewPassword(e,t){this.LoadingData.next(!0);const i={headers:new s.WM({Token:e,NewPassword:encodeURI(t)})};this.http.post(a.N.ResetPasswordUrl,null,i).subscribe(e=>{this.RecivedError.next(e),this.LoadingData.next(!1)},e=>{this.RecivedError.next(e.error),this.LoadingData.next(!1)})}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(s.eN),d.LFG(c.j),d.LFG(l._),d.LFG(g.f),d.LFG(p.y),d.LFG(u.j))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8897:function(e,t,i){"use strict";i.d(t,{o7:function(){return s},iQ:function(){return n},tl:function(){return h}});class s{constructor(e,t){this.Name=e,this.Amount=t}}class n{constructor(e,t){this.Error=new r(e,t)}}class r{constructor(e,t){this.Code=e,this.Message=t}}class h{constructor(e,t,i){this.Total=e,this.Limit=t,this.Offset=i}}},2955:function(e,t,i){"use strict";i.d(t,{_:function(){return a}});var s=i(8897),n=i(3559),r=i(529),h=i(5366);let a=(()=>{class e{constructor(){this.IngredientSelected=new n.xQ,this.IngredientChanged=new n.xQ,this.IngredientsUpdated=new n.xQ,this.IngredientAdded=new n.xQ,this.IngredientUpdated=new n.xQ,this.IngredientDeleted=new n.xQ,this.IngredientClear=new n.xQ,this.ingredients=[]}GetIngredients(){return this.ingredients.slice()}GetIngredientsLength(){return this.ingredients.length}SetIngredients(e){this.ingredients=e,this.IngredientsUpdated.next()}SetPagination(e,t,i){this.Total=e}AddNewItem(e,t){let i=this.ingredients.find(t=>t.Name===e.Name);i?i.Amount=i.Amount+e.Amount:(i=e,(this.ingredients.length<r.N.ShoppingListPageSize||t)&&this.ingredients.push(new s.o7(e.Name,e.Amount))),this.IngredientAdded.next(i),this.IngredientChanged.next(this.ingredients.slice())}UpdateSelectedItem(e){let t=this.ingredients.find(t=>t.Name===e.Name);if(t&&t!==this.CurrentSelectedItem)t.Name=e.Name,t.Amount=t.Amount+e.Amount,this.DeleteSelectedItem();else{const i=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==i&&(this.ingredients[i]=e,this.IngredientChanged.next(this.ingredients.slice())),t=this.CurrentSelectedItem}this.IngredientUpdated.next(t),this.CurrentSelectedItem=null}DeleteSelectedItem(){const e=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.ingredients.splice(e,1),this.IngredientDeleted.next(this.CurrentSelectedItem),this.IngredientChanged.next(this.ingredients.slice()),this.CurrentSelectedItem=null}ClearAll(){this.ingredients=[],this.CurrentSelectedItem=null,this.IngredientChanged.next(this.ingredients.slice()),this.SetPagination(0,0,0),this.IngredientClear.next()}SelectItemShopList(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);