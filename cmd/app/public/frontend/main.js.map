{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/auth/auth-interceptor.service.ts","./src/app/auth/auth.service.ts","./src/app/header/header.component.ts","./src/app/header/header.component.html","./src/app/shared/shared.module.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes, PreloadAllModules } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/recipes/1', pathMatch: 'full' },\n  { path: 'recipes', loadChildren: () => import('./recipes/recipes.module').then(m => m.RecipesModule) },\n  { path: 'shopping-list', loadChildren: () => import('./shopping-list/shopping-list.module').then(m => m.ShoppingListModule) },\n  { path: 'auth', loadChildren: () => import('./auth/auth-feature.module').then(m => m.AuthFeatureModule) },\n  { path: 'admin', loadChildren: () => import('./admin/admin.module').then(m => m.AdminModule) },\n  { path: 'confirm-email', loadChildren: () => import('./confirm-email/confirm-email.module').then(m => m.ConfirmEmailModule) },\n  { path: 'reset-password', loadChildren: () => import('./confirm-email/confirm-email.module').then(m => m.ConfirmEmailModule) },\n  { path: 'profile', loadChildren: () => import('./user-profile/user-profile.module').then(m => m.UserProfileModule) },\n  { path: 'totp', loadChildren: () => import('./totp/totp.module').then(m => m.TotpModule) },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { preloadingStrategy: PreloadAllModules, relativeLinkResolution: 'legacy' })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from './auth/auth.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  constructor(private auth: AuthService) { }\n  ngOnInit(): void {\n    this.auth.AutoSignIn();\n  }\n}\n","<div class=\"container-fluid\">\n    <app-header></app-header>\n    <router-outlet></router-outlet>\n</div>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\n\nimport { AppComponent } from './app.component';\nimport { HeaderComponent } from './header/header.component';\n\nimport { NgbAlertModule, NgbTooltipModule, NgbPaginationModule, NgbDropdownModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AuthInterceptorService } from './auth/auth-interceptor.service';\n\nimport { SharedModule } from './shared/shared.module';\nimport { FormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    HeaderComponent,\n  ],\n  imports: [\n    BrowserModule,\n    NgbTooltipModule,\n    NgbDropdownModule,\n    NgbPaginationModule,\n    NgbAlertModule,\n    AppRoutingModule,\n    HttpClientModule,\n    FormsModule,\n    SharedModule,\n    BrowserAnimationsModule\n  ],\n  providers: [{ provide: HTTP_INTERCEPTORS, useClass: AuthInterceptorService, multi: true }],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpParams, HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { AuthService } from './auth.service';\nimport { environment } from 'src/environments/environment';\n\n@Injectable()\nexport class AuthInterceptorService implements HttpInterceptor {\n\n  constructor(private auth: AuthService) { }\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n    if (this.auth.CheckFirstFactorPassed()) {\n\n      const modreq = req.clone({headers: req.headers.set('Auth', this.auth.GetUserToken())\n      .set('ApiKey', environment.ApiKey)});\n\n      return next.handle(modreq);\n\n    } else {\n\n      const modreq = req.clone({headers: req.headers.set('ApiKey', environment.ApiKey)});\n\n      return next.handle(modreq);\n    }\n\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\nimport { AuthResponseData, AuthRequest } from './auth.module';\nimport { Subject, Observable } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { environment } from '../../environments/environment';\nimport { ErrorResponse } from '../shared/shared.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  private authData: AuthResponseData = null;\n  private autoRefreshToken: any;\n\n  public AuthErrorSub = new Subject<ErrorResponse>();\n  public AuthResultSub = new Subject<boolean>();\n  private authObs: Observable<AuthResponseData>;\n\n  public SfErrorSub = new Subject<ErrorResponse>();\n  public SfResultSub = new Subject<boolean>();\n  private SecFactorObs: Observable<ErrorResponse>;\n\n\n  constructor(\n    private http: HttpClient,\n    private router: Router) { }\n\n  SignUp(UserEmail: string, Name: string, Password: string) {\n\n    const signup: AuthRequest = {\n      Email: UserEmail,\n      Name: encodeURI(Name),\n      Password: encodeURI(Password),\n      ReturnSecureToken: true,\n    };\n\n    this.authObs = this.http.post<AuthResponseData>(\n      environment.SignUpUrl, signup);\n\n    this.RequestSub();\n  }\n\n  SignIn(UserEmail: string, Password: string) {\n\n    const signin: AuthRequest = {\n      Email: UserEmail,\n      Password: encodeURI(Password),\n      ReturnSecureToken: true,\n    };\n\n    this.authObs = this.http.post<AuthResponseData>(\n      environment.SignInUrl, signin);\n\n    this.RequestSub();\n  }\n\n  SecondFactorCheck(Passkey: string) {\n    const httpOptions = {\n      headers: new HttpHeaders({\n        Passcode: Passkey\n      })\n    };\n\n    this.SecFactorObs = this.http.post<ErrorResponse>(\n      environment.TOTPCheckUrl, null, httpOptions);\n\n    this.SecFactorObs.subscribe(\n      response => {\n\n        if (response.Error.Code === 200) {\n          this.authData.SecondFactor.CheckResult = true;\n        } else {\n          this.authData.SecondFactor.CheckResult = false;\n        }\n\n        localStorage.setItem('userData', JSON.stringify(this.authData));\n\n        this.SfResultSub.next(this.authData.SecondFactor.CheckResult);\n        this.SfErrorSub.next(response);\n\n      }, error => {\n\n        const errresp = error.error as ErrorResponse;\n        this.authData.SecondFactor.CheckResult = false;\n\n        this.SfResultSub.next(false);\n        this.SfErrorSub.next(errresp);\n\n      }\n    );\n  }\n\n  SignOut() {\n    this.authData = null;\n    if (this.autoRefreshToken) {\n      clearTimeout(this.autoRefreshToken);\n    }\n\n    localStorage.removeItem('userData');\n\n    this.AuthResultSub.next(false);\n    this.SfResultSub.next(false);\n\n    this.router.navigate(['/auth']);\n  }\n\n  AutoSignIn() {\n    const userData = localStorage.getItem('userData');\n\n    if (!userData) {\n      return;\n    } else {\n      this.authData = JSON.parse(userData);\n\n      const ExpDur = new Date(this.authData.ExpirationDate).getTime() -\n        new Date().getTime();\n\n      this.AuthResultSub.next(true);\n      this.AutoSignOut(ExpDur);\n    }\n  }\n\n  private AutoSignOut(ExpiresIn: number) {\n    this.autoRefreshToken = setTimeout(() => {\n      this.SignOut();\n    }, ExpiresIn);\n  }\n\n  private RequestSub() {\n    this.authObs.subscribe(\n      response => {\n        this.authData = response;\n        this.authData.ExpirationDate = String(new Date(new Date().getTime() + +this.authData.ExpiresIn * 1000));\n        localStorage.setItem('userData', JSON.stringify(this.authData));\n        this.AuthResultSub.next(response.Registered);\n        this.AutoSignOut(+this.authData.ExpiresIn * 1000);\n      }, error => {\n        const errresp = error.error as ErrorResponse;\n        this.AuthResultSub.next(false);\n        this.AuthErrorSub.next(errresp);\n      }\n    );\n  }\n\n  CheckRegistered() {\n    if (this.authData !== null) {\n      if (this.authData.SecondFactor.Enabled === true) {\n        return this.authData.SecondFactor.CheckResult && this.authData.Registered;\n      } else {\n        return this.authData.Registered;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  CheckFirstFactorPassed() {\n    if (this.authData !== null) {\n      return this.authData.Registered;\n    } else {\n      return false;\n    }\n  }\n\n  HaveToCheckSecondFactor() {\n    if (this.authData !== null) {\n      if (this.authData.SecondFactor.Enabled) {\n        return !this.authData.SecondFactor.CheckResult;\n      } else {\n        return false;\n      }\n    } else {\n      return true;\n    }\n  }\n\n  CheckTokenExpired() {\n    if (this.authData.ExpirationDate !== '' && this.authData.ExpirationDate !== null) {\n      return !(new Date() > new Date(this.authData.ExpirationDate));\n    }\n    else {\n      return false;\n    }\n  }\n\n  GetUserToken() {\n    if (this.CheckTokenExpired()) {\n      return this.authData.Token;\n    } else {\n      return null;\n    }\n  }\n\n  GetUserEmail() {\n    if (this.authData) {\n      return this.authData.Email;\n    } else {\n      return null;\n    }\n  }\n\n  GetUserRole() {\n    if (this.authData) {\n      return this.authData.Role;\n    } else {\n      return null;\n    }\n  }\n\n  CheckIfUserIsAdmin() {\n    if (this.GetUserRole() === 'admin_role_CRUD') {\n      return true;\n    }\n\n    return false;\n  }\n}\n\n\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AuthService } from '../auth/auth.service';\nimport { Subscription } from 'rxjs';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\n\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\n\nexport class HeaderComponent implements OnInit, OnDestroy {\n  LoggedIn = false;\n  SecondFactor = false;\n\n  UserEmail: string;\n  UserAdmin: boolean;\n\n  private LoginSub: Subscription;\n  private SecondFactorSub: Subscription;\n\n  constructor(\n    private auth: AuthService,\n    private router: Router\n  ) { }\n\n  ngOnInit(): void {\n    this.LoggedIn = this.auth.CheckRegistered();\n    this.UserEmail = this.auth.GetUserEmail();\n    this.UserAdmin = this.auth.CheckIfUserIsAdmin();\n    if (!this.auth.HaveToCheckSecondFactor()) {\n      this.SecondFactor = true;\n    }\n\n    this.LoginSub = this.auth.AuthResultSub.subscribe((loggedin) => {\n      this.LoggedIn = loggedin;\n      if (!this.auth.HaveToCheckSecondFactor()) {\n        this.SecondFactor = true;\n      }\n      this.UserEmail = this.auth.GetUserEmail();\n      this.UserAdmin = this.auth.CheckIfUserIsAdmin();\n    });\n\n    this.SecondFactorSub = this.auth.SfResultSub.subscribe((result) => {\n      this.SecondFactor = result;\n    });\n\n  }\n\n  SearchRecipes(form: NgForm): void {\n    if (form.valid) {\n      const fvalue = form.value;\n      this.router.navigate(['recipes'], { queryParams: { search: encodeURI(fvalue.searchreq) } });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.LoginSub.unsubscribe();\n    this.SecondFactorSub.unsubscribe();\n  }\n\n  OnLogout() {\n    this.LoggedIn = false;\n    this.UserEmail = '';\n    this.UserAdmin = false;\n    this.auth.SignOut();\n  }\n}\n","<nav class=\"navbar navbar-expand-lg navbar-light bg-light\" style=\"background-color: #e3f2fd;\" *ngIf=\"LoggedIn && SecondFactor\">\n  <div class=\"container-fluid\">\n    <div class=\"navbar-header\">\n      <a href=\"#\" class=\"navbar-brand\">Recipe book</a>\n    </div>\n    <div class=\"navbar-expand mr-auto mt-2 mt-lg-0\">\n      <ul class=\"nav nav-tabs\">\n        <li class=\"nav-item\">\n          <a routerLink=\"/recipes\" routerLinkActive=\"active\" class=\"nav-link\">\n            Recipes\n          </a>\n        </li>\n        <li class=\"nav-item\">\n          <a routerLink=\"/shopping-list\" routerLinkActive=\"active\" class=\"nav-link\" *ngIf=\"UserAdmin\">\n            Shopping list\n          </a>\n        </li>\n        <li class=\"nav-item\">\n          <a routerLink=\"/admin\" routerLinkActive=\"active\" class=\"nav-link\" *ngIf=\"UserAdmin\">\n            Admin\n          </a>\n        </li>\n      </ul>\n    </div>\n    <form (ngSubmit)=\"SearchRecipes(searchform)\" class=\"form-inline\" #searchform=\"ngForm\">\n      <button class=\"btn btn-outline-secondary mr-sm-2 my-2 my-sm-0\" placement=\"bottom\" ngbTooltip=\"View profile\" type=\"button\" routerLinkActive=\"active\" routerLink=\"/profile\">{{UserEmail}}</button>\n      <button class=\"btn btn-outline-primary mr-sm-2 my-2 my-sm-0\" type=\"button\" (click)=\"OnLogout()\">Sign out</button>\n      <input  class=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Search\" ngModel name=\"searchreq\" required>\n      <button class=\"btn btn-outline-primary my-2 my-sm-0\" type=\"submit\" [disabled]=\"searchform.invalid\">Search</button>\n    </form>\n  </div>\n</nav>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    CommonModule,\n  ]\n})\nexport class SharedModule { }\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  RecipePageSize: 5,\n  ShoppingListPageSize: 14,\n  AdminUserListPageSize: 11,\n  SessionsListPageSize: 11,\n  MediaListPageSize: 12,\n  ApiKey: 'AIzaSyB3Jr8tp5wotjeS-re9iBSgX2b1zbM0Fx4',\n  ConfirmEmailUrl: '/api/ConfirmEmail',\n  ResendEmailUrl: '/api/ConfirmEmail/Send',\n  ResetPasswordUrl: '/api/PasswordReset',\n  SendEmailResetPassUrl: '/api/PasswordReset/Send',\n  SignUpUrl: '/api/Accounts/SignUp',\n  SignInUrl: '/api/Accounts/SignIn',\n  GetSetRecipesUrl: '/api/Recipes',\n  GetSetFileUrl: '/api/Files',\n  SearchRecipesUrl: '/api/Recipes/Search',\n  GetSetShoppingListUrl: '/api/ShoppingList',\n  GetSetUsersUrl: '/api/Users',\n  GetSetCurrentUserUrl: '/api/Users/Current',\n  GetSetSessionsUrl: '/api/Sessions',\n  GetTOTPQRCodeUrl: '/api/TOTP/Qr.png',\n  TOTPSettingsUrl: '/api/TOTP/Settings',\n  TOTPCheckUrl: '/api/TOTP/Check',\n  GetAuthenticatorUrl: 'https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2',\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":[],"sourceRoot":"webpack:///"}