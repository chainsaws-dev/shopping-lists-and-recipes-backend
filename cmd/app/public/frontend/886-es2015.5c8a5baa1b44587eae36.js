(self.webpackChunkshopping_lists_and_recipes=self.webpackChunkshopping_lists_and_recipes||[]).push([[886],{5886:function(e,t,i){"use strict";i.r(t),i.d(t,{ShoppingListModule:function(){return C}});var n=i(1116),s=i(529),o=i(5366),r=i(2955),a=i(1190),c=i(2255),g=i(8897),h=i(1462);const l=["f"];function d(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",14),o.NdJ("click",function(){return o.CHM(e),o.oxw().DeleteSelectedItem()}),o._uU(1,"Delete"),o.qZA()}}function u(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",15),o.NdJ("click",function(){return o.CHM(e),o.oxw().ClearAllItems()}),o._uU(1,"Clear"),o.qZA()}}let p=(()=>{class e{constructor(e,t){this.ShopListServ=e,this.DataServ=t,this.editmode=!1}ngOnInit(){this.ingselected=this.ShopListServ.IngredientSelected.subscribe(e=>{this.selectedingredient=e,this.editmode=!0,this.slEditForm.setValue({name:this.selectedingredient.Name,amount:this.selectedingredient.Amount})}),this.IngAdd=this.ShopListServ.IngredientAdded.subscribe(e=>{this.DataServ.SaveShoppingList(e)}),this.IngUpd=this.ShopListServ.IngredientUpdated.subscribe(e=>{this.DataServ.SaveShoppingList(e)}),this.IngDel=this.ShopListServ.IngredientDeleted.subscribe(e=>{this.DataServ.DeleteShoppingList(e)}),this.IngCle=this.ShopListServ.IngredientClear.subscribe(()=>{this.DataServ.DeleteAllShoppingList()})}ngOnDestroy(){this.ingselected.unsubscribe(),this.IngAdd.unsubscribe(),this.IngUpd.unsubscribe(),this.IngDel.unsubscribe(),this.IngCle.unsubscribe()}AddNewItem(e){if(e.valid){const t=e.value;this.ShopListServ.AddNewItem(new g.o7(t.name,parseInt(t.amount,10)),!1)}}UpdateItem(e){if(e.valid){const t=e.value;this.ShopListServ.UpdateSelectedItem(new g.o7(t.name,parseInt(t.amount,10))),this.editmode=!1,this.slEditForm.reset()}}DeleteSelectedItem(){this.ShopListServ.DeleteSelectedItem()}ClearAllItems(){this.ShopListServ.ClearAll()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r._),o.Y36(c.Z))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-shopping-edit"]],viewQuery:function(e,t){if(1&e&&o.Gf(l,5),2&e){let e;o.iGM(e=o.CRH())&&(t.slEditForm=e.first)}},decls:18,vars:4,consts:[[1,"row"],[1,"col"],[3,"ngSubmit"],["f","ngForm"],[1,"input-group","mt-3"],[1,"col-sm-9","form-group"],["type","text","id","name","placeholder","Name","name","name","ngModel","","required","",1,"form-control"],[1,"col","form-group"],["type","number","id","amount","placeholder","Amount","name","amount","ngModel","","required","","pattern","^[1-9]+[0-9]*$",1,"form-control"],[1,"input-group"],[1,"input-group-prepend"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],["class","btn btn-outline-danger","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-secondary","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"form",2,3),o.NdJ("ngSubmit",function(){o.CHM(e);const i=o.MAs(3);return t.editmode?t.UpdateItem(i):t.AddNewItem(i)}),o.TgZ(4,"div",0),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o._UZ(7,"input",6),o.qZA(),o.TgZ(8,"div",7),o._UZ(9,"input",8),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"div",0),o.TgZ(11,"div",1),o.TgZ(12,"div",9),o.TgZ(13,"div",10),o.TgZ(14,"button",11),o._uU(15),o.qZA(),o.YNc(16,d,2,0,"button",12),o.YNc(17,u,2,0,"button",13),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.MAs(3);o.xp6(14),o.Q6J("disabled",e.invalid),o.xp6(1),o.Oqu(t.editmode?"Update":"Add"),o.xp6(1),o.Q6J("ngIf",t.ShopListServ.CurrentSelectedItem),o.xp6(1),o.Q6J("ngIf",0!==t.ShopListServ.GetIngredientsLength())}},directives:[h._Y,h.JL,h.F,h.Fj,h.JJ,h.On,h.Q7,h.wV,h.c5,n.O5],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(255,10,29,.25)!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(52,179,13,.25)!important}"]}),e})();var S=i(2393);function b(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ngb-alert",9),o.NdJ("close",function(){return o.CHM(e),o.oxw(2).ShowMessage=!1}),o._uU(1),o.qZA()}if(2&e){const e=o.oxw(2);o.Q6J("type",e.MessageType),o.xp6(1),o.Oqu(e.ResponseFromBackend.Error.Message)}}function m(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"a",10),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw(2).ShopListServ.SelectItemShopList(t)}),o._uU(1),o.TgZ(2,"span",11),o._uU(3),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit,i=o.oxw(2);o.Q6J("ngClass",i.ShopListServ.IsCurrentSelected(e)?"active":""),o.xp6(1),o.hij("",e.Name," "),o.xp6(2),o.Oqu(e.Amount)}}function v(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"ngb-pagination",12),o.NdJ("pageChange",function(t){return o.CHM(e),o.oxw(2).OnPageChanged(t)}),o.qZA()}if(2&e){const e=o.oxw(2);o.Q6J("collectionSize",e.slcollectionSize)("pageSize",e.slPageSize)("page",e.slCurrentPage)("rotate",!0)("boundaryLinks",!0)("maxSize",11)}}function f(e,t){if(1&e&&(o.TgZ(0,"div",3),o.TgZ(1,"div",4),o._UZ(2,"app-shopping-edit"),o._UZ(3,"hr"),o.YNc(4,b,2,2,"ngb-alert",5),o.TgZ(5,"ul",6),o.YNc(6,m,4,3,"a",7),o.qZA(),o.YNc(7,v,1,6,"ngb-pagination",8),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Q6J("ngIf",e.ShowMessage),o.xp6(2),o.Q6J("ngForOf",e.ingredients),o.xp6(1),o.Q6J("ngIf",e.slcollectionSize>e.slPageSize)}}function I(e,t){1&e&&(o.TgZ(0,"div",13),o.TgZ(1,"span",14),o._uU(2,"Loading..."),o.qZA(),o.qZA())}const Z=[{path:"",redirectTo:"1",pathMatch:"full"},{path:":pn",component:(()=>{class e{constructor(e,t,i,n){this.ShopListServ=e,this.activeroute=t,this.DataServ=i,this.router=n}ngOnDestroy(){this.IngChanged.unsubscribe(),this.PageChanged.unsubscribe(),this.FetchOnInint.unsubscribe(),this.DataLoading.unsubscribe(),this.RecivedErrorSub.unsubscribe(),this.WatchIngAdd.unsubscribe(),this.WatchIngDel.unsubscribe(),this.WatchIngCle.unsubscribe()}ngOnInit(){this.slPageSize=s.N.ShoppingListPageSize,this.RecivedErrorSub=this.DataServ.RecivedError.subscribe(e=>{if(this.ShowMessage=!0,this.ResponseFromBackend=e,setTimeout(()=>this.ShowMessage=!1,5e3),e)switch(e.Error.Code){case 200:this.MessageType="success";break;default:this.MessageType="danger"}}),this.IngChanged=this.ShopListServ.IngredientChanged.subscribe(e=>{this.ingredients=e}),this.PageChanged=this.activeroute.params.subscribe(e=>{this.slCurrentPage=+e.pn}),this.DataLoading=this.DataServ.LoadingData.subscribe(e=>{this.IsLoading=e}),this.FetchOnInint=this.DataServ.FetchShoppingList(this.slCurrentPage,s.N.ShoppingListPageSize).subscribe(e=>{this.ingredients=this.ShopListServ.GetIngredients(),this.slcollectionSize=this.ShopListServ.Total},e=>{this.ingredients=[]}),this.WatchIngAdd=this.ShopListServ.IngredientAdded.subscribe(e=>{this.slcollectionSize+=1,this.ingredients=this.ShopListServ.GetIngredients()}),this.WatchIngDel=this.ShopListServ.IngredientDeleted.subscribe(e=>{this.slcollectionSize-=1,this.ingredients=this.ShopListServ.GetIngredients(),0===this.ingredients.length&&(this.slCurrentPage=this.GetPreviousPage(this.slCurrentPage),this.ShopListServ.Total=this.slcollectionSize,0!==this.slcollectionSize&&this.OnPageChanged(this.slCurrentPage))}),this.WatchIngCle=this.ShopListServ.IngredientClear.subscribe(()=>{this.slcollectionSize=0,this.ShopListServ.Total=this.slcollectionSize})}GetPreviousPage(e){return e>1?e-1:1}OnPageChanged(e){this.slCurrentPage=e,this.FetchOnInint=this.DataServ.FetchShoppingList(e,s.N.ShoppingListPageSize).subscribe(()=>{this.ingredients=this.ShopListServ.GetIngredients(),this.router.navigate(["../",e.toString()],{relativeTo:this.activeroute})})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r._),o.Y36(a.gz),o.Y36(c.Z),o.Y36(a.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-shopping-list"]],decls:3,vars:2,consts:[["class","row",4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"row"],[1,"col"],[3,"type","close",4,"ngIf"],[1,"list-group","mb-1"],["style","cursor: pointer;","class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange",4,"ngIf"],[3,"type","close"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center",2,"cursor","pointer",3,"ngClass","click"],[1,"badge","badge-success","badge-pill"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){1&e&&(o.YNc(0,f,8,3,"div",0),o.TgZ(1,"div",1),o.YNc(2,I,3,0,"div",2),o.qZA()),2&e&&(o.Q6J("ngIf",!t.IsLoading),o.xp6(2),o.Q6J("ngIf",t.IsLoading))},directives:[n.O5,p,n.sg,S.xm,n.mk,S.N9],styles:[""]}),e})(),canActivate:[i(9905).p],data:{expectedRole:"admin_role_CRUD"}}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[n.ez,h.u5,S._A,S.jF,a.Bz.forChild(Z)]]}),e})()}}]);