"use strict";(self.webpackChunkshopping_lists_and_recipes=self.webpackChunkshopping_lists_and_recipes||[]).push([[978],{3978:(_,h,o)=>{o.r(h),o.d(h,{AuthFeatureModule:()=>U,httpTranslateLoader:()=>x});var g=o(1048),m=o(3481),l=o(2340),t=o(9724),p=o(384),d=o(1404),r=o(4190),u=o(4800),i=o(1659),f=o(2719),A=o(8177);function L(n,a){1&n&&(t.TgZ(0,"div",9),t._UZ(1,"input",25),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("placeholder",t.lcZ(2,1,"Name")))}function b(n,a){if(1&n&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&n){const e=a.$implicit,s=t.oxw(2);t.Q6J("value",e)("selected",e===s.translate.currentLang),t.xp6(1),t.hij(" ",e," ")}}function T(n,a){1&n&&(t.TgZ(0,"a",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ForgotYourPassword")))}function Z(n,a){1&n&&(t.TgZ(0,"a",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"NoConfirmationEmail")))}function M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ngb-alert",31),t.NdJ("close",function(){return t.CHM(e),t.oxw(3).ShowMessage=!1}),t._uU(1),t.ALo(2,"FirstLetterUpperPipe"),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("type",e.MessageType),t.xp6(1),t.Oqu(t.lcZ(2,2,e.ResponseFromBackend.Error.Message))}}function C(n,a){if(1&n&&(t.TgZ(0,"div",29),t.YNc(1,M,3,4,"ngb-alert",30),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.ShowMessage)}}function S(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",6)(6,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(e);const c=t.MAs(7);return t.oxw().OnSubmitForm(c)}),t.TgZ(8,"div",9),t._UZ(9,"input",10),t.ALo(10,"translate"),t.ALo(11,"translate"),t.qZA(),t.YNc(12,L,3,3,"div",11),t.TgZ(13,"div",9),t._UZ(14,"input",12),t.ALo(15,"translate"),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",13)(18,"div",14)(19,"button",15),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSwitchMode()}),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"select",17,18),t.NdJ("change",function(){t.CHM(e);const c=t.MAs(26);return t.oxw().SwitchLanguage(c.value)}),t.ALo(27,"translate"),t.YNc(28,b,2,3,"option",19),t.qZA()()()()(),t.TgZ(29,"div",20)(30,"div",21),t.YNc(31,T,3,3,"a",22),t.YNc(32,Z,3,3,"a",23),t.qZA()(),t.YNc(33,C,2,1,"div",24),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,13,e.LoginMode?"SignIn":"SignUp")),t.xp6(6),t.Q6J("placeholder",t.lcZ(10,15,"Email"))("ngbTooltip",t.lcZ(11,17,"RealEmailRequired")),t.xp6(3),t.Q6J("ngIf",!e.LoginMode),t.xp6(2),t.Q6J("placeholder",t.lcZ(15,19,"Password"))("ngbTooltip",t.lcZ(16,21,"MinSixChars")),t.xp6(6),t.Oqu(t.lcZ(21,23,e.LoginMode?"SignIn":"SignUp")),t.xp6(3),t.hij(" ",t.lcZ(24,25,e.LoginMode?"SignUp":"SignIn"),""),t.xp6(2),t.Q6J("ngbTooltip",t.lcZ(27,27,"LangSelector")),t.xp6(3),t.Q6J("ngForOf",e.translate.getLangs()),t.xp6(3),t.Q6J("ngIf",e.LoginMode),t.xp6(1),t.Q6J("ngIf",!e.LoginMode),t.xp6(1),t.Q6J("ngIf",e.ShowMessage)}}function w(n,a){1&n&&(t.TgZ(0,"div",32)(1,"span",33),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Loading")))}let I=(()=>{class n{constructor(e,s,c,v){this.authservice=e,this.router=s,this.translate=c,this.sitetitle=v,this.LoginMode=!0,this.IsLoading=!1,c.addLangs(l.N.SupportedLangs),c.setDefaultLang(l.N.DefaultLocale)}ngOnInit(){const e=localStorage.getItem("userLang");this.SwitchLanguage(null!==e?e:l.N.DefaultLocale),this.authservice.CheckRegistered()&&this.Redirect(),this.authErrSub=this.authservice.AuthErrorSub.subscribe(s=>{this.ShowMessage=!0,this.ResponseFromBackend=s,setTimeout(()=>this.ShowMessage=!1,5e3),s&&(this.MessageType=200===s.Error.Code?"success":"danger"),this.IsLoading=!1}),this.loginResultSub=this.authservice.AuthResultSub.subscribe(s=>{this.loggedIn=s,this.IsLoading=!1,s&&(this.authservice.HaveToCheckSecondFactor()?this.GoToSecondFactor():this.Redirect())})}SwitchLanguage(e){this.translate.use(e),localStorage.setItem("userLang",e),this.translate.get("WebsiteTitleText",e).subscribe({next:s=>{this.sitetitle.setTitle(s)},error:s=>{console.log(s)}})}ngOnDestroy(){this.loginResultSub.unsubscribe(),this.authErrSub.unsubscribe()}onSwitchMode(){this.LoginMode=!this.LoginMode}OnSubmitForm(e){e.invalid?(this.ShowMessage=!0,this.ResponseFromBackend=new m.iQ(400,this.translate.instant("IncorrectDataInput")),this.MessageType="danger",setTimeout(()=>this.ShowMessage=!1,5e3)):(this.IsLoading=!0,this.LoginMode?this.authservice.SignIn(e.value.email,e.value.password):this.authservice.SignUp(e.value.email,e.value.name,e.value.password),e.reset())}Redirect(){this.router.navigate(["/recipes"])}GoToSecondFactor(){this.router.navigate(["/totp"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.e),t.Y36(d.F0),t.Y36(r.sK),t.Y36(u.Dx))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-auth"]],decls:4,vars:2,consts:[[1,"main-parent-login"],["class","card mx-auto","style","margin-top: 3px;",4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"card","mx-auto",2,"margin-top","3px"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit"],["SignupForm","ngForm"],[1,"input-group","mb-3"],["type","email","name","email","placement","right","ngModel","","email","","required","",1,"form-control",3,"placeholder","ngbTooltip"],["class","input-group mb-3",4,"ngIf"],["type","password","name","password","ngModel","","required","","minlength","6","placement","right",1,"form-control",3,"placeholder","ngbTooltip"],[1,"float-right"],[1,"input-group"],["type","submit",1,"btn","btn-outline-primary","me-1"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"form-select",3,"ngbTooltip","change"],["selectedLang",""],[3,"value","selected",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"d-flex","justify-content-center"],["href","/reset-password",4,"ngIf"],["href","/confirm-email",4,"ngIf"],["style","padding: 3px",4,"ngIf"],["type","text","name","name","ngModel","",1,"form-control",3,"placeholder"],[3,"value","selected"],["href","/reset-password"],["href","/confirm-email"],[2,"padding","3px"],[3,"type","close",4,"ngIf"],[3,"type","close"],["role","status",1,"spinner-border"],[1,"visually-hidden-focusable"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.YNc(1,S,34,29,"div",1),t.TgZ(2,"div",2),t.YNc(3,w,4,3,"div",3),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",!s.IsLoading),t.xp6(2),t.Q6J("ngIf",s.IsLoading))},directives:[g.O5,i._Y,i.JL,i.F,i.Fj,i.JJ,i.On,i.on,i.Q7,f._L,i.wO,g.sg,i.YN,i.Kr,f.xm],pipes:[r.X$,A.J],styles:[".main-parent-login[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.card[_ngcontent-%COMP%]{width:300px}.remember[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:20px;height:20px;margin-left:15px;margin-right:5px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #ff0a1d40!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #34b30d40!important}"]}),n})();var y=o(4466),F=o(9725),O=o(319);const J=[{path:"",component:I}];let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,i.u5,d.Bz.forChild(J),r.aw.forRoot({loader:{provide:r.Zw,useFactory:x,deps:[F.eN]}}),y.m,f._A,f.HK]]}),n})();function x(n){return new O.w(n)}},8177:(_,h,o)=>{o.d(h,{J:()=>m});var g=o(9724);let m=(()=>{class l{transform(p){return p.substring(0,1).toUpperCase()+p.substring(1)}}return l.\u0275fac=function(p){return new(p||l)},l.\u0275pipe=g.Yjl({name:"FirstLetterUpperPipe",type:l,pure:!0}),l})()},3481:(_,h,o)=>{o.d(h,{iQ:()=>l,o7:()=>g,tl:()=>p});class g{constructor(r,u){this.Name=r,this.Amount=u}}class l{constructor(r,u){this.Error=new t(r,u)}}class t{constructor(r,u){this.Code=r,this.Message=u}}class p{constructor(r,u,i){this.Total=r,this.Limit=u,this.Offset=i}}}}]);