"use strict";(self.webpackChunkshopping_lists_and_recipes=self.webpackChunkshopping_lists_and_recipes||[]).push([[320],{3320:(U,m,o)=>{o.r(m),o.d(m,{ShoppingListModule:()=>J,httpTranslateLoader:()=>L});var c=o(1048),a=o(2340),t=o(9724),v=o(2457),u=o(1404),b=o(3649),C=o(384),p=o(4190),f=o(3481),l=o(1659);const I=["f"];function _(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().DeleteSelectedItem()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Delete")))}function x(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().ClearAllItems()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Clear")))}let A=(()=>{class n{constructor(e,i,s){this.ShopListServ=e,this.DataServ=i,this.translate=s,this.editmode=!1,s.addLangs(a.N.SupportedLangs),s.setDefaultLang(a.N.DefaultLocale)}ngOnInit(){const e=localStorage.getItem("userLang");this.SwitchLanguage(null!==e?e:a.N.DefaultLocale),this.ingselected=this.ShopListServ.IngredientSelected.subscribe(i=>{this.selectedingredient=i,this.editmode=!0,this.slEditForm.setValue({name:this.selectedingredient.Name,amount:this.selectedingredient.Amount})}),this.IngAdd=this.ShopListServ.IngredientAdded.subscribe(i=>{this.DataServ.SaveShoppingList(i)}),this.IngUpd=this.ShopListServ.IngredientUpdated.subscribe(i=>{this.DataServ.SaveShoppingList(i)}),this.IngDel=this.ShopListServ.IngredientDeleted.subscribe(i=>{this.DataServ.DeleteShoppingList(i)}),this.IngCle=this.ShopListServ.IngredientClear.subscribe(()=>{this.DataServ.DeleteAllShoppingList()})}ngOnDestroy(){this.ingselected.unsubscribe(),this.IngAdd.unsubscribe(),this.IngUpd.unsubscribe(),this.IngDel.unsubscribe(),this.IngCle.unsubscribe()}AddNewItem(e){if(e.valid){const i=e.value;this.ShopListServ.AddNewItem(new f.o7(i.name,parseInt(i.amount,10)),!1)}}UpdateItem(e){if(e.valid){const i=e.value;this.ShopListServ.UpdateSelectedItem(new f.o7(i.name,parseInt(i.amount,10))),this.editmode=!1,this.slEditForm.reset()}}DeleteSelectedItem(){this.ShopListServ.DeleteSelectedItem()}ClearAllItems(){this.ShopListServ.ClearAll()}SwitchLanguage(e){this.translate.use(e),localStorage.setItem("userLang",e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v._),t.Y36(b.Z),t.Y36(p.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-edit"]],viewQuery:function(e,i){if(1&e&&t.Gf(I,5),2&e){let s;t.iGM(s=t.CRH())&&(i.slEditForm=s.first)}},decls:21,vars:12,consts:[[1,"row"],[1,"col"],[3,"ngSubmit"],["f","ngForm"],[1,"input-group","mt-2","mb-2"],[1,"col-sm-9","form-group","me-1"],["type","text","id","name","name","name","ngModel","","required","",1,"form-control",3,"placeholder"],[1,"col","form-group"],["type","number","id","amount","name","amount","ngModel","","required","","pattern","^[1-9]+[0-9]*$",1,"form-control",3,"placeholder"],[1,"input-group"],[1,"input-group-prepend"],["type","submit",1,"btn","btn-outline-primary","me-1",3,"disabled"],["class","btn btn-outline-danger me-1","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-secondary","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger","me-1",3,"click"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3),t.NdJ("ngSubmit",function(){t.CHM(s);const h=t.MAs(3);return i.editmode?i.UpdateItem(h):i.AddNewItem(h)}),t.TgZ(4,"div",0)(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",7),t._UZ(10,"input",8),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",0)(13,"div",1)(14,"div",9)(15,"div",10)(16,"button",11),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,_,3,3,"button",12),t.YNc(20,x,3,3,"button",13),t.qZA()()()()()()()}if(2&e){const s=t.MAs(3);t.xp6(7),t.Q6J("placeholder",t.lcZ(8,6,"NameSL")),t.xp6(3),t.Q6J("placeholder",t.lcZ(11,8,"Amount")),t.xp6(6),t.Q6J("disabled",s.invalid),t.xp6(1),t.Oqu(t.lcZ(18,10,i.editmode?"Update":"Add")),t.xp6(2),t.Q6J("ngIf",i.ShopListServ.CurrentSelectedItem),t.xp6(1),t.Q6J("ngIf",0!==i.ShopListServ.GetIngredientsLength())}},directives:[l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,l.Q7,l.wV,l.c5,c.O5],pipes:[p.X$],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #ff0a1d40!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #34b30d40!important}"]}),n})();var d=o(2719),T=o(8177);function Z(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ngb-alert",9),t.NdJ("close",function(){return t.CHM(e),t.oxw(2).ShowMessage=!1}),t._uU(1),t.ALo(2,"FirstLetterUpperPipe"),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("type",e.MessageType),t.xp6(1),t.Oqu(t.lcZ(2,2,e.ResponseFromBackend.Error.Message))}}function y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"a",10),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw(2).ShopListServ.SelectItemShopList(g)}),t._uU(1),t.TgZ(2,"span",11),t._uU(3),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.Q6J("ngClass",i.ShopListServ.IsCurrentSelected(e)?"active":""),t.xp6(1),t.hij("",e.Name," "),t.xp6(2),t.Oqu(e.Amount)}}function D(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ngb-pagination",12),t.NdJ("pageChange",function(s){return t.CHM(e),t.oxw(2).OnPageChanged(s)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("collectionSize",e.slcollectionSize)("pageSize",e.slPageSize)("page",e.slCurrentPage)("rotate",!0)("boundaryLinks",!0)("maxSize",11)}}function N(n,r){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4),t._UZ(2,"app-shopping-edit")(3,"hr"),t.YNc(4,Z,3,4,"ngb-alert",5),t.TgZ(5,"ul",6),t.YNc(6,y,4,3,"a",7),t.qZA(),t.YNc(7,D,1,6,"ngb-pagination",8),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.ShowMessage),t.xp6(2),t.Q6J("ngForOf",e.ingredients),t.xp6(1),t.Q6J("ngIf",e.slcollectionSize>e.slPageSize)}}function w(n,r){1&n&&(t.TgZ(0,"div",13)(1,"span",14),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Loading")))}let F=(()=>{class n{constructor(e,i,s,g,h,S){this.ShopListServ=e,this.activeroute=i,this.DataServ=s,this.router=g,this.auth=h,this.translate=S,S.addLangs(a.N.SupportedLangs),S.setDefaultLang(a.N.DefaultLocale)}ngOnDestroy(){this.IngChanged.unsubscribe(),this.PageChanged.unsubscribe(),this.FetchOnInint.unsubscribe(),this.DataLoading.unsubscribe(),this.RecivedErrorSub.unsubscribe(),this.WatchIngAdd.unsubscribe(),this.WatchIngDel.unsubscribe(),this.WatchIngCle.unsubscribe()}ngOnInit(){const e=localStorage.getItem("userLang");this.SwitchLanguage(null!==e?e:a.N.DefaultLocale),this.slPageSize=a.N.ShoppingListPageSize,this.RecivedErrorSub=this.DataServ.RecivedError.subscribe(i=>{this.ShowMessage=!0,this.ResponseFromBackend=i,setTimeout(()=>{this.ShowMessage=!1,(401===i.Error.Code||403===i.Error.Code||407===i.Error.Code)&&this.auth.SignOut()},a.N.MessageTimeout),i&&(this.MessageType=200===i.Error.Code?"success":"danger")}),this.IngChanged=this.ShopListServ.IngredientChanged.subscribe(i=>{this.ingredients=i}),this.PageChanged=this.activeroute.params.subscribe(i=>{this.slCurrentPage=+i.pn}),this.DataLoading=this.DataServ.LoadingData.subscribe(i=>{this.IsLoading=i}),this.FetchOnInint=this.DataServ.FetchShoppingList(this.slCurrentPage,a.N.ShoppingListPageSize).subscribe(i=>{this.ingredients=this.ShopListServ.GetIngredients(),this.slcollectionSize=this.ShopListServ.Total},i=>{this.ingredients=[]}),this.WatchIngAdd=this.ShopListServ.IngredientAdded.subscribe(i=>{this.slcollectionSize+=1,this.ingredients=this.ShopListServ.GetIngredients()}),this.WatchIngDel=this.ShopListServ.IngredientDeleted.subscribe(i=>{this.slcollectionSize-=1,this.ingredients=this.ShopListServ.GetIngredients(),0===this.ingredients.length&&(this.slCurrentPage=this.GetPreviousPage(this.slCurrentPage),this.ShopListServ.Total=this.slcollectionSize,0!==this.slcollectionSize&&this.OnPageChanged(this.slCurrentPage))}),this.WatchIngCle=this.ShopListServ.IngredientClear.subscribe(()=>{this.slcollectionSize=0,this.ShopListServ.Total=this.slcollectionSize})}GetPreviousPage(e){return e>1?e-1:1}OnPageChanged(e){this.slCurrentPage=e,this.FetchOnInint=this.DataServ.FetchShoppingList(e,a.N.ShoppingListPageSize).subscribe(()=>{this.ingredients=this.ShopListServ.GetIngredients(),this.router.navigate(["../",e.toString()],{relativeTo:this.activeroute})})}SwitchLanguage(e){this.translate.use(e),localStorage.setItem("userLang",e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v._),t.Y36(u.gz),t.Y36(b.Z),t.Y36(u.F0),t.Y36(C.e),t.Y36(p.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-list"]],decls:3,vars:2,consts:[["class","row",4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"row"],[1,"col"],[3,"type","close",4,"ngIf"],[1,"list-group","mb-1"],["style","cursor: pointer;","class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange",4,"ngIf"],[3,"type","close"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center",2,"cursor","pointer",3,"ngClass","click"],[1,"badge","bg-primary","rounded-pill"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange"],["role","status",1,"spinner-border"],[1,"visually-hidden-focusable"]],template:function(e,i){1&e&&(t.YNc(0,N,8,3,"div",0),t.TgZ(1,"div",1),t.YNc(2,w,4,3,"div",2),t.qZA()),2&e&&(t.Q6J("ngIf",!i.IsLoading),t.xp6(2),t.Q6J("ngIf",i.IsLoading))},directives:[c.O5,A,d.xm,c.sg,c.mk,d.N9],pipes:[T.J,p.X$],styles:[""]}),n})();var M=o(9805),z=o(319),E=o(9725),P=o(4466);const O=[{path:"",redirectTo:"1",pathMatch:"full"},{path:":pn",component:F,canActivate:[M.p],data:{expectedRole:"admin_role_CRUD"}}];let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P.m,c.ez,l.u5,d._A,d.jF,u.Bz.forChild(O),p.aw.forRoot({loader:{provide:p.Zw,useFactory:L,deps:[E.eN]}})]]}),n})();function L(n){return new z.w(n)}}}]);