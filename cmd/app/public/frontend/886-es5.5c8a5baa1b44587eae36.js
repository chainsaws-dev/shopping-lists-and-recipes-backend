!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(self.webpackChunkshopping_lists_and_recipes=self.webpackChunkshopping_lists_and_recipes||[]).push([[886],{5886:function(t,i,s){"use strict";s.r(i),s.d(i,{ShoppingListModule:function(){return w}});var r=s(1116),o=s(529),a=s(5366),c=s(2955),u=s(1190),g=s(2255),l=s(8897),d=s(1462),p=["f"];function h(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){return a.CHM(n),a.oxw().DeleteSelectedItem()}),a._uU(1,"Delete"),a.qZA()}}function S(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"button",15),a.NdJ("click",function(){return a.CHM(n),a.oxw().ClearAllItems()}),a._uU(1,"Clear"),a.qZA()}}var f=function(){var t=function(){function t(n,i){e(this,t),this.ShopListServ=n,this.DataServ=i,this.editmode=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.ingselected=this.ShopListServ.IngredientSelected.subscribe(function(t){e.selectedingredient=t,e.editmode=!0,e.slEditForm.setValue({name:e.selectedingredient.Name,amount:e.selectedingredient.Amount})}),this.IngAdd=this.ShopListServ.IngredientAdded.subscribe(function(t){e.DataServ.SaveShoppingList(t)}),this.IngUpd=this.ShopListServ.IngredientUpdated.subscribe(function(t){e.DataServ.SaveShoppingList(t)}),this.IngDel=this.ShopListServ.IngredientDeleted.subscribe(function(t){e.DataServ.DeleteShoppingList(t)}),this.IngCle=this.ShopListServ.IngredientClear.subscribe(function(){e.DataServ.DeleteAllShoppingList()})}},{key:"ngOnDestroy",value:function(){this.ingselected.unsubscribe(),this.IngAdd.unsubscribe(),this.IngUpd.unsubscribe(),this.IngDel.unsubscribe(),this.IngCle.unsubscribe()}},{key:"AddNewItem",value:function(e){if(e.valid){var t=e.value;this.ShopListServ.AddNewItem(new l.o7(t.name,parseInt(t.amount,10)),!1)}}},{key:"UpdateItem",value:function(e){if(e.valid){var t=e.value;this.ShopListServ.UpdateSelectedItem(new l.o7(t.name,parseInt(t.amount,10))),this.editmode=!1,this.slEditForm.reset()}}},{key:"DeleteSelectedItem",value:function(){this.ShopListServ.DeleteSelectedItem()}},{key:"ClearAllItems",value:function(){this.ShopListServ.ClearAll()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Y36(c._),a.Y36(g.Z))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-shopping-edit"]],viewQuery:function(e,t){var n;(1&e&&a.Gf(p,5),2&e)&&(a.iGM(n=a.CRH())&&(t.slEditForm=n.first))},decls:18,vars:4,consts:[[1,"row"],[1,"col"],[3,"ngSubmit"],["f","ngForm"],[1,"input-group","mt-3"],[1,"col-sm-9","form-group"],["type","text","id","name","placeholder","Name","name","name","ngModel","","required","",1,"form-control"],[1,"col","form-group"],["type","number","id","amount","placeholder","Amount","name","amount","ngModel","","required","","pattern","^[1-9]+[0-9]*$",1,"form-control"],[1,"input-group"],[1,"input-group-prepend"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],["class","btn btn-outline-danger","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-secondary","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"form",2,3),a.NdJ("ngSubmit",function(){a.CHM(n);var e=a.MAs(3);return t.editmode?t.UpdateItem(e):t.AddNewItem(e)}),a.TgZ(4,"div",0),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a._UZ(7,"input",6),a.qZA(),a.TgZ(8,"div",7),a._UZ(9,"input",8),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"div",0),a.TgZ(11,"div",1),a.TgZ(12,"div",9),a.TgZ(13,"div",10),a.TgZ(14,"button",11),a._uU(15),a.qZA(),a.YNc(16,h,2,0,"button",12),a.YNc(17,S,2,0,"button",13),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var i=a.MAs(3);a.xp6(14),a.Q6J("disabled",i.invalid),a.xp6(1),a.Oqu(t.editmode?"Update":"Add"),a.xp6(1),a.Q6J("ngIf",t.ShopListServ.CurrentSelectedItem),a.xp6(1),a.Q6J("ngIf",0!==t.ShopListServ.GetIngredientsLength())}},directives:[d._Y,d.JL,d.F,d.Fj,d.JJ,d.On,d.Q7,d.wV,d.c5,r.O5],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(255,10,29,.25)!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(52,179,13,.25)!important}"]}),t}(),v=s(2393);function b(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ngb-alert",9),a.NdJ("close",function(){return a.CHM(n),a.oxw(2).ShowMessage=!1}),a._uU(1),a.qZA()}if(2&e){var i=a.oxw(2);a.Q6J("type",i.MessageType),a.xp6(1),a.Oqu(i.ResponseFromBackend.Error.Message)}}function m(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"a",10),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(2).ShopListServ.SelectItemShopList(e)}),a._uU(1),a.TgZ(2,"span",11),a._uU(3),a.qZA(),a.qZA()}if(2&e){var i=t.$implicit,s=a.oxw(2);a.Q6J("ngClass",s.ShopListServ.IsCurrentSelected(i)?"active":""),a.xp6(1),a.hij("",i.Name," "),a.xp6(2),a.Oqu(i.Amount)}}function I(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ngb-pagination",12),a.NdJ("pageChange",function(e){return a.CHM(n),a.oxw(2).OnPageChanged(e)}),a.qZA()}if(2&e){var i=a.oxw(2);a.Q6J("collectionSize",i.slcollectionSize)("pageSize",i.slPageSize)("page",i.slCurrentPage)("rotate",!0)("boundaryLinks",!0)("maxSize",11)}}function Z(e,t){if(1&e&&(a.TgZ(0,"div",3),a.TgZ(1,"div",4),a._UZ(2,"app-shopping-edit"),a._UZ(3,"hr"),a.YNc(4,b,2,2,"ngb-alert",5),a.TgZ(5,"ul",6),a.YNc(6,m,4,3,"a",7),a.qZA(),a.YNc(7,I,1,6,"ngb-pagination",8),a.qZA(),a.qZA()),2&e){var n=a.oxw();a.xp6(4),a.Q6J("ngIf",n.ShowMessage),a.xp6(2),a.Q6J("ngForOf",n.ingredients),a.xp6(1),a.Q6J("ngIf",n.slcollectionSize>n.slPageSize)}}function C(e,t){1&e&&(a.TgZ(0,"div",13),a.TgZ(1,"span",14),a._uU(2,"Loading..."),a.qZA(),a.qZA())}var L,A,y=[{path:"",redirectTo:"1",pathMatch:"full"},{path:":pn",component:(L=function(){function t(n,i,s,r){e(this,t),this.ShopListServ=n,this.activeroute=i,this.DataServ=s,this.router=r}return n(t,[{key:"ngOnDestroy",value:function(){this.IngChanged.unsubscribe(),this.PageChanged.unsubscribe(),this.FetchOnInint.unsubscribe(),this.DataLoading.unsubscribe(),this.RecivedErrorSub.unsubscribe(),this.WatchIngAdd.unsubscribe(),this.WatchIngDel.unsubscribe(),this.WatchIngCle.unsubscribe()}},{key:"ngOnInit",value:function(){var e=this;this.slPageSize=o.N.ShoppingListPageSize,this.RecivedErrorSub=this.DataServ.RecivedError.subscribe(function(t){if(e.ShowMessage=!0,e.ResponseFromBackend=t,setTimeout(function(){return e.ShowMessage=!1},5e3),t)switch(t.Error.Code){case 200:e.MessageType="success";break;default:e.MessageType="danger"}}),this.IngChanged=this.ShopListServ.IngredientChanged.subscribe(function(t){e.ingredients=t}),this.PageChanged=this.activeroute.params.subscribe(function(t){e.slCurrentPage=+t.pn}),this.DataLoading=this.DataServ.LoadingData.subscribe(function(t){e.IsLoading=t}),this.FetchOnInint=this.DataServ.FetchShoppingList(this.slCurrentPage,o.N.ShoppingListPageSize).subscribe(function(t){e.ingredients=e.ShopListServ.GetIngredients(),e.slcollectionSize=e.ShopListServ.Total},function(t){e.ingredients=[]}),this.WatchIngAdd=this.ShopListServ.IngredientAdded.subscribe(function(t){e.slcollectionSize+=1,e.ingredients=e.ShopListServ.GetIngredients()}),this.WatchIngDel=this.ShopListServ.IngredientDeleted.subscribe(function(t){e.slcollectionSize-=1,e.ingredients=e.ShopListServ.GetIngredients(),0===e.ingredients.length&&(e.slCurrentPage=e.GetPreviousPage(e.slCurrentPage),e.ShopListServ.Total=e.slcollectionSize,0!==e.slcollectionSize&&e.OnPageChanged(e.slCurrentPage))}),this.WatchIngCle=this.ShopListServ.IngredientClear.subscribe(function(){e.slcollectionSize=0,e.ShopListServ.Total=e.slcollectionSize})}},{key:"GetPreviousPage",value:function(e){return e>1?e-1:1}},{key:"OnPageChanged",value:function(e){var t=this;this.slCurrentPage=e,this.FetchOnInint=this.DataServ.FetchShoppingList(e,o.N.ShoppingListPageSize).subscribe(function(){t.ingredients=t.ShopListServ.GetIngredients(),t.router.navigate(["../",e.toString()],{relativeTo:t.activeroute})})}}]),t}(),L.\u0275fac=function(e){return new(e||L)(a.Y36(c._),a.Y36(u.gz),a.Y36(g.Z),a.Y36(u.F0))},L.\u0275cmp=a.Xpm({type:L,selectors:[["app-shopping-list"]],decls:3,vars:2,consts:[["class","row",4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"row"],[1,"col"],[3,"type","close",4,"ngIf"],[1,"list-group","mb-1"],["style","cursor: pointer;","class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange",4,"ngIf"],[3,"type","close"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center",2,"cursor","pointer",3,"ngClass","click"],[1,"badge","badge-success","badge-pill"],[3,"collectionSize","pageSize","page","rotate","boundaryLinks","maxSize","pageChange"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,t){1&e&&(a.YNc(0,Z,8,3,"div",0),a.TgZ(1,"div",1),a.YNc(2,C,3,0,"div",2),a.qZA()),2&e&&(a.Q6J("ngIf",!t.IsLoading),a.xp6(2),a.Q6J("ngIf",t.IsLoading))},directives:[r.O5,f,r.sg,v.xm,r.mk,v.N9],styles:[""]}),L),canActivate:[s(9905).p],data:{expectedRole:"admin_role_CRUD"}}],w=((A=function t(){e(this,t)}).\u0275fac=function(e){return new(e||A)},A.\u0275mod=a.oAB({type:A}),A.\u0275inj=a.cJS({imports:[[r.ez,d.u5,v._A,v.jF,u.Bz.forChild(y)]]}),A)}}])}();