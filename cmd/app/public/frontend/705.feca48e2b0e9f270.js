"use strict";(self.webpackChunkshopping_lists_and_recipes=self.webpackChunkshopping_lists_and_recipes||[]).push([[705],{162:(_,S,o)=>{o.d(S,{P:()=>d});class d{constructor(g,h,r,x,e,p){this.Filename=g,this.Filesize=h,this.Filetype=r,this.FileID=x,this.ID=p,this.PreviewID=e}}},2245:(_,S,o)=>{o.d(S,{y:()=>h});var d=o(162),l=o(8023),u=o(2340),g=o(9724);let h=(()=>{class r{constructor(){this.FileSelected=new l.x,this.FilesUpdated=new l.x,this.FilesInserted=new l.x,this.FilesDeleted=new l.x,this.FilesChanged=new l.x,this.Files=[]}GetFiles(){return this.Files.slice()}SetFiles(e){this.Files=e,this.FilesUpdated.next()}SetPagination(e,p,a){this.Total=e}SelectItemFilesList(e){this.CurrentSelectedItem=e,this.FileSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}GetFileById(e){return e<this.Files.length&&e>0?this.Files[e]:this.Files[0]}UpdateExistingFile(e,p){this.Files[p]=e,this.FilesChanged.next(e)}AddNewFile(e){const p=new d.P(e.Filename,e.Filesize,e.Filetype,e.FileID,e.PreviewID,e.ID);this.Files.length<u.N.AdminUserListPageSize&&this.Files.push(p),this.FilesChanged.next(p),this.FilesInserted.next()}DeleteFile(e){this.Files.splice(e,1),this.FilesDeleted.next()}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},9101:(_,S,o)=>{o.d(S,{j:()=>u});var d=o(8023),l=o(9724);let u=(()=>{class g{constructor(){this.SessionsUpdated=new d.x,this.SessionsInserted=new d.x,this.SessionsDeleted=new d.x,this.SessionsChanged=new d.x,this.SessionsSelected=new d.x,this.Sessions=[]}GetSessions(){return this.Sessions.slice()}SetSessions(r){this.Sessions=r,this.SessionsUpdated.next()}SetPagination(r,x,e){this.Total=r}SelectItemSessionsList(r){this.CurrentSelectedItem=r,this.SessionsSelected.next(r)}IsCurrentSelected(r){return this.CurrentSelectedItem===r}GetSessionById(r){return r<this.Sessions.length&&r>0?this.Sessions[r]:this.Sessions[0]}DeleteSession(r){this.Sessions.splice(r,1),this.SessionsDeleted.next()}}return g.\u0275fac=function(r){return new(r||g)},g.\u0275prov=l.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},1203:(_,S,o)=>{o.d(S,{n:()=>d});class d{constructor(g,h,r,x,e){this.GUID="",this.Role=g,this.Email=h,this.Phone=r,this.Name=x,this.Lang=e,this.IsAdmin=!1,this.Confirmed=!1,this.SecondFactor=!1,this.Disabled=!1}}},9112:(_,S,o)=>{o.d(S,{f:()=>h});var d=o(1203),l=o(8023),u=o(2340),g=o(9724);let h=(()=>{class r{constructor(){this.UserSelected=new l.x,this.UsersUpdated=new l.x,this.UsersInserted=new l.x,this.UsersDeleted=new l.x,this.UsersChanged=new l.x,this.Users=[]}GetUsers(){return this.Users.slice()}SetUsers(e){this.Users=e,this.UsersUpdated.next()}SetPagination(e,p,a){this.Total=e}SelectItemUsersList(e){this.CurrentSelectedItem=e,this.UserSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}GetUserById(e){return e<this.Users.length&&e>0?this.Users[e]:this.Users[0]}UpdateExistingUser(e,p){this.Users[p]=e,this.UsersChanged.next(e)}AddNewUser(e){const p=new d.n(e.Role,e.Email,e.Phone,e.Name,e.Lang);this.Users.length<u.N.AdminUserListPageSize&&this.Users.push(p),this.UsersChanged.next(p),this.UsersInserted.next()}DeleteUser(e){this.Users.splice(e,1),this.UsersDeleted.next()}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},3671:(_,S,o)=>{o.d(S,{p:()=>d});class d{constructor(g,h,r,x,e,p){this.Name=g,this.Description=h,this.ImagePath=r,this.Ingredients=x,this.ImageDbID=e,this.ID=p}}},5496:(_,S,o)=>{o.d(S,{j:()=>x});var d=o(3671),l=o(3481),u=o(8023),g=o(2340),h=o(9724),r=o(2457);let x=(()=>{class e{constructor(a){this.ShopList=a,this.IngredientSelected=new u.x,this.RecipeChanged=new u.x,this.RecipesUpdated=new u.x,this.RecipesInserted=new u.x,this.RecipesDeleted=new u.x,this.recipes=[]}GetRecipes(){return this.recipes.slice(0,g.N.RecipePageSize)}GetRecipesLen(){return this.recipes.length}GetRecipeById(a){return a<this.recipes.length&&a>0?this.recipes[a]:this.recipes[0]}GetRecipeId(a){return this.recipes.indexOf(a)}SendToShoppingList(a){a.forEach(D=>{this.ShopList.AddNewItem(D,!0)})}GetShoppingList(){return this.ShopList.GetIngredients()}AddNewRecipe(a){const D=new d.p(a.Name,a.Description,a.ImagePath,a.Ingredients,a.ImageDbID,a.ID);this.recipes.length<g.N.RecipePageSize&&this.recipes.push(D),this.RecipeChanged.next(D),this.RecipesInserted.next()}UpdateExistingRecipe(a,D){this.recipes[D]=a,this.RecipeChanged.next(a)}SetRecipes(a){this.recipes=a,this.RecipesUpdated.next()}DeleteRecipe(a){this.recipes.splice(a,1),this.RecipesDeleted.next()}AddNewIngredient(a){const D=this.RecipeToEdit.Ingredients.find(L=>L.Name===a.Name);D?D.Amount=D.Amount+a.Amount:this.RecipeToEdit.Ingredients.push(new l.o7(a.Name,a.Amount))}UpdateSelectedIngredient(a){const D=this.RecipeToEdit.Ingredients.find(L=>L.Name===a.Name);if(D&&D!==this.CurrentSelectedItem)D.Name=a.Name,D.Amount=D.Amount+a.Amount,this.DeleteSelectedIngredient();else{const L=this.RecipeToEdit.Ingredients.find(m=>m===this.CurrentSelectedItem);L&&(L.Name=a.Name,L.Amount=a.Amount)}this.CurrentSelectedItem=null,this.IngredientSelected.next(this.CurrentSelectedItem)}DeleteSelectedIngredient(){const a=this.RecipeToEdit.Ingredients.indexOf(this.CurrentSelectedItem);-1!==a&&this.RecipeToEdit.Ingredients.splice(a,1),this.CurrentSelectedItem=null}ClearAllIngredients(){this.RecipeToEdit.Ingredients=[],this.CurrentSelectedItem=null}GetIngredientsLength(){return this.RecipeToEdit.Ingredients.length}IngredientSelect(a){this.CurrentSelectedItem=a,this.IngredientSelected.next(a)}}return e.\u0275fac=function(a){return new(a||e)(h.LFG(r._))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3649:(_,S,o)=>{o.d(S,{Z:()=>f});var d=o(9725),l=o(3481),u=o(7969),g=o(8168),h=o(2340),r=o(8023),x=o(9724),e=o(5496),p=o(2457),a=o(9112),D=o(2245),L=o(9101),m=o(4190);let f=(()=>{class I{constructor(s,n,i,t,c,E,U){this.http=s,this.recipes=n,this.shoppinglist=i,this.users=t,this.media=c,this.sessions=E,this.translate=U,this.LoadingData=new r.x,this.RecipesUpdateInsert=new r.x,this.RecivedError=new r.x,this.PaginationSet=new r.x,this.FileUploadProgress=new r.x,this.FileUploaded=new r.x,this.UserUpdateInsert=new r.x,this.CurrentUserFetch=new r.x,this.TwoFactorSub=new r.x,U.addLangs(h.N.SupportedLangs),U.setDefaultLang(h.N.DefaultLocale)}GetLanguageSelected(){const s=localStorage.getItem("userLang");this.SwitchLanguage(null!==s?s:h.N.DefaultLocale)}SwitchLanguage(s){this.translate.use(s),localStorage.setItem("userLang",s)}FetchRecipes(s,n){this.LoadingData.next(!0);const i={headers:new d.WM({Page:s.toString(),Limit:n.toString()})};return this.http.get(h.N.GetSetRecipesUrl,i).pipe((0,u.U)(t=>(t.Recipes=t.Recipes.map(c=>Object.assign(Object.assign({},c),{Ingredients:c.Ingredients?c.Ingredients:[]})),t)),(0,g.b)({next:t=>{this.recipes.SetRecipes(t.Recipes),this.PaginationSet.next(new l.tl(t.Total,t.Limit,t.Offset)),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}}))}SearchRecipes(s,n,i){this.LoadingData.next(!0);const t={headers:new d.WM({Page:s.toString(),Limit:n.toString(),Search:i})};return this.http.get(h.N.SearchRecipesUrl,t).pipe((0,u.U)(c=>(c.Recipes=c.Recipes.map(E=>Object.assign(Object.assign({},E),{Ingredients:E.Ingredients?E.Ingredients:[]})),c)),(0,g.b)({next:c=>{this.recipes.SetRecipes(c.Recipes),this.PaginationSet.next(new l.tl(c.Total,c.Limit,c.Offset)),this.LoadingData.next(!1)},error:c=>{this.RecivedError.next(c.error),this.LoadingData.next(!1)}}))}SaveRecipe(s){this.LoadingData.next(!0),this.http.post(h.N.GetSetRecipesUrl,s).subscribe({next:n=>{this.RecipesUpdateInsert.next(n),this.GetLanguageSelected(),this.RecivedError.next(new l.iQ(200,this.translate.instant("DataSaved"))),this.LoadingData.next(!1)},error:n=>{this.RecivedError.next(n.error),this.LoadingData.next(!1)}})}FetchFilesList(s,n){this.LoadingData.next(!0);const i={headers:new d.WM({Page:s.toString(),Limit:n.toString()})};return this.http.get(h.N.GetSetFileUrl,i).pipe((0,g.b)({next:t=>{this.media.SetFiles(t.Files),this.media.SetPagination(t.Total,t.Limit,t.Offset),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}}))}FileUpload(s){const n=new FormData;n.append("file",s,s.name),this.http.post(h.N.GetSetFileUrl,n,{headers:new d.WM({}),reportProgress:!0,observe:"events"}).subscribe({next:i=>{i.type===d.dt.UploadProgress?this.FileUploadProgress.next(String(i.loaded/i.total*100)):i.type===d.dt.Response&&i.ok&&this.FileUploaded.next(i.body)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}DeleteFile(s,n){this.LoadingData.next(!0);const i={headers:new d.WM({FileID:s.toString()})};this.http.delete(h.N.GetSetFileUrl,i).subscribe({next:t=>{n||this.RecivedError.next(t),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}})}DeleteRecipe(s){this.LoadingData.next(!0);const n={headers:new d.WM({RecipeID:s.ID.toString()})};this.http.delete(h.N.GetSetRecipesUrl,n).subscribe({next:i=>{this.RecivedError.next(i),this.LoadingData.next(!1),this.DeleteFile(s.ImageDbID,!0)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}FetchShoppingList(s,n){this.LoadingData.next(!0);const i={headers:new d.WM({Page:s.toString(),Limit:n.toString()})};return this.http.get(h.N.GetSetShoppingListUrl,i).pipe((0,g.b)({next:t=>{this.shoppinglist.SetIngredients(t.Items),this.shoppinglist.SetPagination(t.Total,t.Limit,t.Offset),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}}))}SaveShoppingList(s){this.LoadingData.next(!0),this.http.post(h.N.GetSetShoppingListUrl,s).subscribe({next:n=>{this.RecipesUpdateInsert.next(n),this.GetLanguageSelected(),this.RecivedError.next(new l.iQ(200,this.translate.instant("DataSaved"))),this.LoadingData.next(!1)},error:n=>{this.RecivedError.next(n.error),this.LoadingData.next(!1)}})}DeleteShoppingList(s){this.LoadingData.next(!0);const n={headers:new d.WM({IngName:encodeURI(s.Name)})};this.http.delete(h.N.GetSetShoppingListUrl,n).subscribe({next:i=>{this.RecivedError.next(i),this.LoadingData.next(!1)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}DeleteAllShoppingList(){this.http.delete(h.N.GetSetShoppingListUrl).subscribe({next:s=>{this.RecivedError.next(s),this.LoadingData.next(!1)},error:s=>{this.RecivedError.next(s.error),this.LoadingData.next(!1)}})}FetchSessionsList(s,n){this.LoadingData.next(!0);const i={headers:new d.WM({Page:s.toString(),Limit:n.toString()})};return this.http.get(h.N.GetSetSessionsUrl,i).pipe((0,g.b)({next:t=>{this.sessions.SetSessions(t.Sessions),this.sessions.SetPagination(t.Total,t.Limit,t.Offset),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}}))}DeleteSessionByToken(s){this.LoadingData.next(!0);const n={headers:new d.WM({Token:s})};this.http.delete(h.N.GetSetSessionsUrl,n).subscribe({next:i=>{this.RecivedError.next(i),this.LoadingData.next(!1)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}DeleteSessionByEmail(s){this.LoadingData.next(!0);const n={headers:new d.WM({Email:s})};this.http.delete(h.N.GetSetSessionsUrl,n).subscribe({next:i=>{this.RecivedError.next(i),this.LoadingData.next(!1)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}FetchUsersList(s,n){this.LoadingData.next(!0);const i={headers:new d.WM({Page:s.toString(),Limit:n.toString()})};return this.http.get(h.N.GetSetUsersUrl,i).pipe((0,g.b)({next:t=>{this.users.SetUsers(t.Users),this.users.SetPagination(t.Total,t.Limit,t.Offset),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}}))}FetchCurrentUser(){return this.LoadingData.next(!0),this.http.get(h.N.GetSetCurrentUserUrl).subscribe({next:s=>{this.CurrentUserFetch.next(s),this.LoadingData.next(!1)},error:s=>{this.RecivedError.next(s.error),this.LoadingData.next(!1)}})}SaveCurrentUser(s,n,i){this.LoadingData.next(!0),0===s.GUID.length&&(s.GUID="00000000-0000-0000-0000-000000000000"),this.GetObsForSaveCurrentUser(s,n,i).subscribe({next:t=>{this.UserUpdateInsert.next(t),this.GetLanguageSelected(),this.RecivedError.next(new l.iQ(200,this.translate.instant("DataSaved"))),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}})}SaveUser(s,n,i){this.LoadingData.next(!0),0===s.GUID.length&&(s.GUID="00000000-0000-0000-0000-000000000000"),this.GetObsForSaveUser(s,n,i).subscribe({next:t=>{this.UserUpdateInsert.next(t),this.GetLanguageSelected(),this.RecivedError.next(new l.iQ(200,this.translate.instant("DataSaved"))),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}})}LinkTwoFactor(s,n){const i={headers:new d.WM({Passcode:s})};this.http.post(h.N.TOTPSettingsUrl,n,i).subscribe({next:t=>{n.SecondFactor=!0,this.TwoFactorSub.next(n),this.RecivedError.next(t),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}})}UnlinkTwoFactor(s){this.http.delete(h.N.TOTPSettingsUrl).subscribe({next:n=>{s.SecondFactor=!1,this.TwoFactorSub.next(s),this.RecivedError.next(n),this.LoadingData.next(!1)},error:n=>{this.RecivedError.next(n.error),this.LoadingData.next(!1)}})}GetObsForSaveCurrentUser(s,n,i){if(n){const t={headers:new d.WM({NewPassword:encodeURI(i)})};return this.http.post(h.N.GetSetCurrentUserUrl,s,t)}return this.http.post(h.N.GetSetCurrentUserUrl,s)}GetObsForSaveUser(s,n,i){if(n){const t={headers:new d.WM({NewPassword:encodeURI(i)})};return this.http.post(h.N.GetSetUsersUrl,s,t)}return this.http.post(h.N.GetSetUsersUrl,s)}DeleteUser(s){this.LoadingData.next(!0);const n={headers:new d.WM({UserID:encodeURI(s.GUID)})};this.http.delete(h.N.GetSetUsersUrl,n).subscribe({next:i=>{this.RecivedError.next(i),this.LoadingData.next(!1)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}ConfirmEmail(s){this.LoadingData.next(!0);const n={headers:new d.WM({Token:s})};this.http.post(h.N.ConfirmEmailUrl,null,n).subscribe({next:i=>{this.RecivedError.next(i),this.LoadingData.next(!1)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}SendEmailConfirmEmail(s){this.LoadingData.next(!0);const n={headers:new d.WM({Email:s})};this.http.post(h.N.ResendEmailUrl,null,n).subscribe({next:i=>{this.RecivedError.next(i),this.LoadingData.next(!1)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}SendEmailResetPassword(s){this.LoadingData.next(!0);const n={headers:new d.WM({Email:s})};this.http.post(h.N.SendEmailResetPassUrl,null,n).subscribe({next:i=>{this.RecivedError.next(i),this.LoadingData.next(!1)},error:i=>{this.RecivedError.next(i.error),this.LoadingData.next(!1)}})}SubmitNewPassword(s,n){this.LoadingData.next(!0);const i={headers:new d.WM({Token:s,NewPassword:encodeURI(n)})};this.http.post(h.N.ResetPasswordUrl,null,i).subscribe({next:t=>{this.RecivedError.next(t),this.LoadingData.next(!1)},error:t=>{this.RecivedError.next(t.error),this.LoadingData.next(!1)}})}}return I.\u0275fac=function(s){return new(s||I)(x.LFG(d.eN),x.LFG(e.j),x.LFG(p._),x.LFG(a.f),x.LFG(D.y),x.LFG(L.j),x.LFG(m.sK))},I.\u0275prov=x.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},8177:(_,S,o)=>{o.d(S,{J:()=>l});var d=o(9724);let l=(()=>{class u{transform(h){return h.substring(0,1).toUpperCase()+h.substring(1)}}return u.\u0275fac=function(h){return new(h||u)},u.\u0275pipe=d.Yjl({name:"FirstLetterUpperPipe",type:u,pure:!0}),u})()},3481:(_,S,o)=>{o.d(S,{iQ:()=>u,o7:()=>d,tl:()=>h});class d{constructor(x,e){this.Name=x,this.Amount=e}}class u{constructor(x,e){this.Error=new g(x,e)}}class g{constructor(x,e){this.Code=x,this.Message=e}}class h{constructor(x,e,p){this.Total=x,this.Limit=e,this.Offset=p}}},2457:(_,S,o)=>{o.d(S,{_:()=>h});var d=o(3481),l=o(8023),u=o(2340),g=o(9724);let h=(()=>{class r{constructor(){this.IngredientSelected=new l.x,this.IngredientChanged=new l.x,this.IngredientsUpdated=new l.x,this.IngredientAdded=new l.x,this.IngredientUpdated=new l.x,this.IngredientDeleted=new l.x,this.IngredientClear=new l.x,this.ingredients=[]}GetIngredients(){return this.ingredients.slice()}GetIngredientsLength(){return this.ingredients.length}SetIngredients(e){this.ingredients=e,this.IngredientsUpdated.next()}SetPagination(e,p,a){this.Total=e}AddNewItem(e,p){let a=this.ingredients.find(D=>D.Name===e.Name);a?a.Amount=a.Amount+e.Amount:(a=e,(this.ingredients.length<u.N.ShoppingListPageSize||p)&&this.ingredients.push(new d.o7(e.Name,e.Amount))),this.IngredientAdded.next(a),this.IngredientChanged.next(this.ingredients.slice())}UpdateSelectedItem(e){let p=this.ingredients.find(a=>a.Name===e.Name);if(p&&p!==this.CurrentSelectedItem)p.Name=e.Name,p.Amount=p.Amount+e.Amount,this.DeleteSelectedItem();else{const a=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==a&&(this.ingredients[a]=e,this.IngredientChanged.next(this.ingredients.slice())),p=this.CurrentSelectedItem}this.IngredientUpdated.next(p),this.CurrentSelectedItem=null}DeleteSelectedItem(){const e=this.ingredients.indexOf(this.CurrentSelectedItem);-1!==e&&this.ingredients.splice(e,1),this.IngredientDeleted.next(this.CurrentSelectedItem),this.IngredientChanged.next(this.ingredients.slice()),this.CurrentSelectedItem=null}ClearAll(){this.ingredients=[],this.CurrentSelectedItem=null,this.IngredientChanged.next(this.ingredients.slice()),this.SetPagination(0,0,0),this.IngredientClear.next()}SelectItemShopList(e){this.CurrentSelectedItem=e,this.IngredientSelected.next(e)}IsCurrentSelected(e){return this.CurrentSelectedItem===e}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);