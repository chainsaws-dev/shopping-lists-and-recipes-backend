"use strict";(self.webpackChunkshopping_lists_and_recipes=self.webpackChunkshopping_lists_and_recipes||[]).push([[978],{3978:(Z,c,r)=>{r.r(c),r.d(c,{AuthFeatureModule:()=>T});var d=r(9808),t=r(5e3),l=r(384),p=r(5909),s=r(2382),a=r(8986);function g(n,i){1&n&&(t.TgZ(0,"div",9),t._UZ(1,"input",23),t.qZA())}function h(n,i){1&n&&(t.TgZ(0,"a",24),t._uU(1,"Forgot your password?"),t.qZA())}function m(n,i){1&n&&(t.TgZ(0,"a",25),t._uU(1,"No confirmation email?"),t.qZA())}function f(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ngb-alert",28),t.NdJ("close",function(){return t.CHM(e),t.oxw(3).ShowMessage=!1}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("type",e.MessageType),t.xp6(1),t.Oqu(e.ResponseFromBackend.Error.Message)}}function _(n,i){if(1&n&&(t.TgZ(0,"div",26),t.YNc(1,f,2,2,"ngb-alert",27),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.ShowMessage)}}function v(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h3"),t._uU(3),t.qZA()(),t.TgZ(4,"div",6)(5,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(e);const u=t.MAs(6);return t.oxw().OnSubmitForm(u)}),t.TgZ(7,"div",9),t._UZ(8,"input",10),t.qZA(),t.YNc(9,g,2,0,"div",11),t.TgZ(10,"div",9),t._UZ(11,"input",12),t.qZA(),t.TgZ(12,"div",13)(13,"div",14)(14,"div",15)(15,"button",16),t._uU(16),t.qZA(),t.TgZ(17,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSwitchMode()}),t._uU(18),t.qZA()()()()()(),t.TgZ(19,"div",18)(20,"div",19),t.YNc(21,h,2,0,"a",20),t.YNc(22,m,2,0,"a",21),t.qZA()(),t.YNc(23,_,2,1,"div",22),t.qZA()}if(2&n){const e=t.MAs(6),o=t.oxw();t.xp6(3),t.Oqu(o.LoginMode?"Sign in":"Sign up"),t.xp6(6),t.Q6J("ngIf",!o.LoginMode),t.xp6(6),t.Q6J("disabled",e.invalid),t.xp6(1),t.Oqu(o.LoginMode?"Login":"Sign up"),t.xp6(2),t.hij("To ",o.LoginMode?"sign up":"sign in",""),t.xp6(3),t.Q6J("ngIf",o.LoginMode),t.xp6(1),t.Q6J("ngIf",!o.LoginMode),t.xp6(1),t.Q6J("ngIf",o.ShowMessage)}}function b(n,i){1&n&&(t.TgZ(0,"div",29)(1,"span",30),t._uU(2,"Loading..."),t.qZA()())}let x=(()=>{class n{constructor(e,o){this.authservice=e,this.router=o,this.LoginMode=!0,this.IsLoading=!1}ngOnInit(){this.authservice.CheckRegistered()&&this.Redirect(),this.authErrSub=this.authservice.AuthErrorSub.subscribe(e=>{this.ShowMessage=!0,this.ResponseFromBackend=e,setTimeout(()=>this.ShowMessage=!1,5e3),e&&(this.MessageType=200===e.Error.Code?"success":"danger"),this.IsLoading=!1}),this.loginResultSub=this.authservice.AuthResultSub.subscribe(e=>{this.loggedIn=e,this.IsLoading=!1,e&&(this.authservice.HaveToCheckSecondFactor()?this.GoToSecondFactor():this.Redirect())})}ngOnDestroy(){this.loginResultSub.unsubscribe(),this.authErrSub.unsubscribe()}onSwitchMode(){this.LoginMode=!this.LoginMode}OnSubmitForm(e){this.IsLoading=!0,this.LoginMode?this.authservice.SignIn(e.value.email,e.value.password):this.authservice.SignUp(e.value.email,e.value.name,e.value.password),e.reset()}Redirect(){this.router.navigate(["/recipes"])}GoToSecondFactor(){this.router.navigate(["/totp"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.e),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-auth"]],decls:4,vars:2,consts:[[1,"main-parent-login"],["class","card mx-auto","style","margin-top: 3px;",4,"ngIf"],[1,"text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"card","mx-auto",2,"margin-top","3px"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit"],["SignupForm","ngForm"],[1,"input-group","mb-3"],["type","email","name","email","placeholder","E-mail","placement","right","ngbTooltip","Real email required","ngModel","","email","","required","",1,"form-control"],["class","input-group mb-3",4,"ngIf"],["type","password","name","password","placeholder","Password","ngModel","","required","","minlength","6","placement","right","ngbTooltip","Minimum 6 chars",1,"form-control"],[1,"float-right"],[1,"input-group"],[1,"input-group-prepend"],["type","submit",1,"btn","btn-outline-primary","me-1",3,"disabled"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"card-footer"],[1,"d-flex","justify-content-center"],["href","/reset-password",4,"ngIf"],["href","/confirm-email",4,"ngIf"],["style","padding: 3px",4,"ngIf"],["type","text","name","name","placeholder","Name","ngModel","",1,"form-control"],["href","/reset-password"],["href","/confirm-email"],[2,"padding","3px"],[3,"type","close",4,"ngIf"],[3,"type","close"],["role","status",1,"spinner-border"],[1,"visually-hidden-focusable"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,v,24,8,"div",1),t.TgZ(2,"div",2),t.YNc(3,b,3,0,"div",3),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",!o.IsLoading),t.xp6(2),t.Q6J("ngIf",o.IsLoading))},directives:[d.O5,s._Y,s.JL,s.F,s.Fj,a._L,s.JJ,s.On,s.on,s.Q7,s.wO,a.xm],styles:[".main-parent-login[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.card[_ngcontent-%COMP%]{width:300px}.remember[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:20px;height:20px;margin-left:15px;margin-right:5px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff0a1d!important;box-shadow:none!important}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #ff0a1d40!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#67c07b!important;box-shadow:none!important}input.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #34b30d40!important}"]}),n})();var M=r(4466);const A=[{path:"",component:x}];let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,s.u5,p.Bz.forChild(A),M.m,a._A,a.HK]]}),n})()}}]);